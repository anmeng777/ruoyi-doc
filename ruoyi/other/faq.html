<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>常见问题 | RuoYi</title>
    <meta name="generator" content="VuePress 1.8.3">
    <link rel="icon" href="/images/favicon.ico">
    <link rel="stylesheet" href="/css/ruoyi.css">
    <script charset="utf-8" src="/js/ruoyi.js"></script>
    <meta name="description" content="使用若依快速构建web应用程序">
    
    <link rel="preload" href="/assets/css/0.styles.d6ad21ed.css" as="style"><link rel="preload" href="/assets/js/app.c3abf7ee.js" as="script"><link rel="preload" href="/assets/js/2.f516d180.js" as="script"><link rel="preload" href="/assets/js/60.aae167a9.js" as="script"><link rel="prefetch" href="/assets/js/10.731a4d43.js"><link rel="prefetch" href="/assets/js/11.528419ea.js"><link rel="prefetch" href="/assets/js/12.e7444f79.js"><link rel="prefetch" href="/assets/js/13.a395ede7.js"><link rel="prefetch" href="/assets/js/14.874b879c.js"><link rel="prefetch" href="/assets/js/15.474d0efa.js"><link rel="prefetch" href="/assets/js/16.501f0998.js"><link rel="prefetch" href="/assets/js/17.c9fd1b5b.js"><link rel="prefetch" href="/assets/js/18.840a1c4b.js"><link rel="prefetch" href="/assets/js/19.29b935c2.js"><link rel="prefetch" href="/assets/js/20.4f577393.js"><link rel="prefetch" href="/assets/js/21.8b85136f.js"><link rel="prefetch" href="/assets/js/22.678e089b.js"><link rel="prefetch" href="/assets/js/23.e608d9bf.js"><link rel="prefetch" href="/assets/js/24.3df80953.js"><link rel="prefetch" href="/assets/js/25.80bdd342.js"><link rel="prefetch" href="/assets/js/26.8a3b95a9.js"><link rel="prefetch" href="/assets/js/27.3eb61a11.js"><link rel="prefetch" href="/assets/js/28.4b1c6f97.js"><link rel="prefetch" href="/assets/js/29.a8b19b18.js"><link rel="prefetch" href="/assets/js/3.ca16bf72.js"><link rel="prefetch" href="/assets/js/30.a42979a6.js"><link rel="prefetch" href="/assets/js/31.379791f7.js"><link rel="prefetch" href="/assets/js/32.39b24193.js"><link rel="prefetch" href="/assets/js/33.444cf8e8.js"><link rel="prefetch" href="/assets/js/34.b55a1c88.js"><link rel="prefetch" href="/assets/js/35.fbcd2bb6.js"><link rel="prefetch" href="/assets/js/36.131461bf.js"><link rel="prefetch" href="/assets/js/37.319d0ad7.js"><link rel="prefetch" href="/assets/js/38.f0549b87.js"><link rel="prefetch" href="/assets/js/39.45a1dd30.js"><link rel="prefetch" href="/assets/js/4.c986860c.js"><link rel="prefetch" href="/assets/js/40.4aeafe89.js"><link rel="prefetch" href="/assets/js/41.34f2f0ac.js"><link rel="prefetch" href="/assets/js/42.a4fa56dc.js"><link rel="prefetch" href="/assets/js/43.c847d416.js"><link rel="prefetch" href="/assets/js/44.e54eadaa.js"><link rel="prefetch" href="/assets/js/45.4e39aa7c.js"><link rel="prefetch" href="/assets/js/46.728be48a.js"><link rel="prefetch" href="/assets/js/47.0964481e.js"><link rel="prefetch" href="/assets/js/48.4bf5de6e.js"><link rel="prefetch" href="/assets/js/49.c50a41bd.js"><link rel="prefetch" href="/assets/js/5.88ad39ea.js"><link rel="prefetch" href="/assets/js/50.68d2fdad.js"><link rel="prefetch" href="/assets/js/51.8c138180.js"><link rel="prefetch" href="/assets/js/52.63209656.js"><link rel="prefetch" href="/assets/js/53.3c37058f.js"><link rel="prefetch" href="/assets/js/54.ead2f3aa.js"><link rel="prefetch" href="/assets/js/55.04038ace.js"><link rel="prefetch" href="/assets/js/56.9a50bae4.js"><link rel="prefetch" href="/assets/js/57.e8b2b4d0.js"><link rel="prefetch" href="/assets/js/58.8e2ac16b.js"><link rel="prefetch" href="/assets/js/59.3fb2e8d2.js"><link rel="prefetch" href="/assets/js/6.da8722b2.js"><link rel="prefetch" href="/assets/js/7.6075b05b.js"><link rel="prefetch" href="/assets/js/8.c6b3de51.js"><link rel="prefetch" href="/assets/js/9.b57aa4ca.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d6ad21ed.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">RuoYi</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/ruoyi/" class="nav-link router-link-active">
  文档
</a></div><div class="nav-item"><a href="/ruoyi-vue/" class="nav-link">
  分离版
</a></div><div class="nav-item"><a href="/ruoyi-cloud/" class="nav-link">
  微服务版
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="生态系统" class="dropdown-title"><span class="title">生态系统</span> <span class="arrow down"></span></button> <button type="button" aria-label="生态系统" class="mobile-dropdown-title"><span class="title">生态系统</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          项目
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://gitee.com/y_project/RuoYi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RuoYi
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://gitee.com/y_project/RuoYi-Vue" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RuoYi-Vue
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://gitee.com/y_project/RuoYi-Cloud" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RuoYi-Cloud
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          扩展列表
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/ruoyi/document/xmkz.html" class="nav-link">
  RuoYi 项目扩展
</a></li><li class="dropdown-subitem"><a href="/ruoyi-vue/document/xmkz.html" class="nav-link">
  RuoYi-Vue 项目扩展
</a></li><li class="dropdown-subitem"><a href="/ruoyi-cloud/document/xmkz.html" class="nav-link">
  RuoYi-Cloud 项目扩展
</a></li></ul></li><li class="dropdown-item"><h4>
          帮助
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://gitee.com/y_project/RuoYi/issues" target="_blank" rel="noopener noreferrer" class="nav-link external">
  我要提问
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="/ruoyi/other/faq.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  常见问题
</a></li><li class="dropdown-subitem"><a href="https://jq.qq.com/?_wv=1027&amp;k=1sNsfWzD" target="_blank" rel="noopener noreferrer" class="nav-link external">
  加入QQ群
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/yangzongzhuan/RuoYi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://gitee.com/y_project/RuoYi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/ruoyi/" class="nav-link router-link-active">
  文档
</a></div><div class="nav-item"><a href="/ruoyi-vue/" class="nav-link">
  分离版
</a></div><div class="nav-item"><a href="/ruoyi-cloud/" class="nav-link">
  微服务版
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="生态系统" class="dropdown-title"><span class="title">生态系统</span> <span class="arrow down"></span></button> <button type="button" aria-label="生态系统" class="mobile-dropdown-title"><span class="title">生态系统</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          项目
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://gitee.com/y_project/RuoYi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RuoYi
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://gitee.com/y_project/RuoYi-Vue" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RuoYi-Vue
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://gitee.com/y_project/RuoYi-Cloud" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RuoYi-Cloud
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          扩展列表
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/ruoyi/document/xmkz.html" class="nav-link">
  RuoYi 项目扩展
</a></li><li class="dropdown-subitem"><a href="/ruoyi-vue/document/xmkz.html" class="nav-link">
  RuoYi-Vue 项目扩展
</a></li><li class="dropdown-subitem"><a href="/ruoyi-cloud/document/xmkz.html" class="nav-link">
  RuoYi-Cloud 项目扩展
</a></li></ul></li><li class="dropdown-item"><h4>
          帮助
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://gitee.com/y_project/RuoYi/issues" target="_blank" rel="noopener noreferrer" class="nav-link external">
  我要提问
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="/ruoyi/other/faq.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  常见问题
</a></li><li class="dropdown-subitem"><a href="https://jq.qq.com/?_wv=1027&amp;k=1sNsfWzD" target="_blank" rel="noopener noreferrer" class="nav-link external">
  加入QQ群
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/yangzongzhuan/RuoYi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://gitee.com/y_project/RuoYi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>文档</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/ruoyi/" aria-current="page" class="sidebar-link">介绍</a></li><li><a href="/ruoyi/document/kslj.html" class="sidebar-link">快速了解</a></li><li><a href="/ruoyi/document/hjbs.html" class="sidebar-link">环境部署</a></li><li><a href="/ruoyi/document/xmjs.html" class="sidebar-link">项目介绍</a></li><li><a href="/ruoyi/document/htsc.html" class="sidebar-link">后台手册</a></li><li><a href="/ruoyi/document/qdsc.html" class="sidebar-link">前端手册</a></li><li><a href="/ruoyi/document/gnzj.html" class="sidebar-link">功能组件</a></li><li><a href="/ruoyi/document/mbyq.html" class="sidebar-link">模板引擎</a></li><li><a href="/ruoyi/document/zjwd.html" class="sidebar-link">组件文档</a></li><li><a href="/ruoyi/document/cjjc.html" class="sidebar-link">插件集成</a></li><li><a href="/ruoyi/document/xmkz.html" class="sidebar-link">项目扩展</a></li><li><a href="/ruoyi/document/spjc.html" class="sidebar-link">视频教程</a></li><li><a href="/ruoyi/document/gxrz.html" class="sidebar-link">更新日志</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>其它</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/ruoyi/other/faq.html" aria-current="page" class="active sidebar-link">常见问题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#如何不登录直接访问" class="sidebar-link">如何不登录直接访问</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#如何更换项目包路径" class="sidebar-link">如何更换项目包路径</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#业务模块访问出现404" class="sidebar-link">业务模块访问出现404</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#idea更改页面不重启" class="sidebar-link">IDEA更改页面不重启</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#如何使用多数据源" class="sidebar-link">如何使用多数据源</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#如何更换主题皮肤" class="sidebar-link">如何更换主题皮肤</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#如何使用横向菜单" class="sidebar-link">如何使用横向菜单</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#如何获取用户登录信息" class="sidebar-link">如何获取用户登录信息</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#如何防止请求重复提交" class="sidebar-link">如何防止请求重复提交</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#如何配置允许跨域访问" class="sidebar-link">如何配置允许跨域访问</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#如何实现滑块验证码" class="sidebar-link">如何实现滑块验证码</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#日期插件精确到时分秒" class="sidebar-link">日期插件精确到时分秒</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#代码生成不显示新建表" class="sidebar-link">代码生成不显示新建表</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#提示您没有数据的权限" class="sidebar-link">提示您没有数据的权限</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#富文本编辑器文件上传" class="sidebar-link">富文本编辑器文件上传</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#富文本编辑器底部回弹" class="sidebar-link">富文本编辑器底部回弹</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#富文本对话框回弹顶部" class="sidebar-link">富文本对话框回弹顶部</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#如何创建新的菜单页签" class="sidebar-link">如何创建新的菜单页签</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#表格数据进行汇总统计" class="sidebar-link">表格数据进行汇总统计</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#表格设置行列单元格样式" class="sidebar-link">表格设置行列单元格样式</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#文件上传大小限制配置" class="sidebar-link">文件上传大小限制配置</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#如何去除文件上传按钮" class="sidebar-link">如何去除文件上传按钮</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#如何去除数据监控广告" class="sidebar-link">如何去除数据监控广告</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#如何支持多类型数据库" class="sidebar-link">如何支持多类型数据库</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#如何实现翻页保留选择" class="sidebar-link">如何实现翻页保留选择</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#如何实现跳转至指定页" class="sidebar-link">如何实现跳转至指定页</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#如何自定义查询条件参数" class="sidebar-link">如何自定义查询条件参数</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#如何让表格某些列隐藏掉" class="sidebar-link">如何让表格某些列隐藏掉</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#如何给默认的表格加边框" class="sidebar-link">如何给默认的表格加边框</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#普通用户创建文件无权限" class="sidebar-link">普通用户创建文件无权限</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#druid关闭掉ping的方式" class="sidebar-link">Druid关闭掉ping的方式</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#如何降低mysql驱动版本" class="sidebar-link">如何降低mysql驱动版本</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#如何配置tomcat访问日志" class="sidebar-link">如何配置tomcat访问日志</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#如何配置包路径日志级别" class="sidebar-link">如何配置包路径日志级别</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#如何配置项目访问根路径" class="sidebar-link">如何配置项目访问根路径</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#swagger的启用和禁用" class="sidebar-link">Swagger的启用和禁用</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#如何汉化系统接口swagger" class="sidebar-link">如何汉化系统接口Swagger</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#swagger接口出现转换错误" class="sidebar-link">Swagger接口出现转换错误</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#如何在html页面格式化日期" class="sidebar-link">如何在html页面格式化日期</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#如何在表格中实现图片预览" class="sidebar-link">如何在表格中实现图片预览</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#如何去掉页脚及左侧菜单栏" class="sidebar-link">如何去掉页脚及左侧菜单栏</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#登录页如何开启注册用户功能" class="sidebar-link">登录页如何开启注册用户功能</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#如何限制账户只能一个人登录" class="sidebar-link">如何限制账户只能一个人登录</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#登录页面如何不显示验证码" class="sidebar-link">登录页面如何不显示验证码</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#如何excel导出子对象多个字段" class="sidebar-link">如何Excel导出子对象多个字段</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#更多操作字符串参数读取问题" class="sidebar-link">更多操作字符串参数读取问题</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#单元格内容过长显示处理方法" class="sidebar-link">单元格内容过长显示处理方法</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#表格禁用某列复选框选择方法" class="sidebar-link">表格禁用某列复选框选择方法</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#表格默认勾选某列复选框方法" class="sidebar-link">表格默认勾选某列复选框方法</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#页面如何一次初始化多个表格" class="sidebar-link">页面如何一次初始化多个表格</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#表格底部合计列拖动显示问题" class="sidebar-link">表格底部合计列拖动显示问题</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#表格操作列传递行数据的对象" class="sidebar-link">表格操作列传递行数据的对象</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#日期控件初始化时间并格式化" class="sidebar-link">日期控件初始化时间并格式化</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#如何调整首页左侧菜单栏宽度" class="sidebar-link">如何调整首页左侧菜单栏宽度</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#如何默认显示表格卡片视图" class="sidebar-link">如何默认显示表格卡片视图</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#编辑和删除操作按钮不可用" class="sidebar-link">编辑和删除操作按钮不可用</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#tomcat部署多个war包项目异常" class="sidebar-link">Tomcat部署多个War包项目异常</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#部署多个项目ehcache缓存异常" class="sidebar-link">部署多个项目Ehcache缓存异常</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#tomcat临时目录tmp抛错误异常" class="sidebar-link">Tomcat临时目录tmp抛错误异常</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#如何部署配置支持https访问" class="sidebar-link">如何部署配置支持https访问</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#特殊字符串被过滤的解决办法" class="sidebar-link">特殊字符串被过滤的解决办法</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#进入首页如何自动展开某菜单" class="sidebar-link">进入首页如何自动展开某菜单</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#进入首页如何默认记忆控制台" class="sidebar-link">进入首页如何默认记忆控制台</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#打包如何分离jar包和资源文件" class="sidebar-link">打包如何分离jar包和资源文件</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#linux系统验证码乱码解决方法" class="sidebar-link">Linux系统验证码乱码解决方法</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#公共数据库定时任务没有被执行" class="sidebar-link">公共数据库定时任务没有被执行</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#如何设置用户登录会话超时时间" class="sidebar-link">如何设置用户登录会话超时时间</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#如何实现用户免密登录配置方法" class="sidebar-link">如何实现用户免密登录配置方法</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#如何处理long类型精度丢失问题" class="sidebar-link">如何处理Long类型精度丢失问题</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#如何修改超级管理员登录密码" class="sidebar-link">如何修改超级管理员登录密码</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#如何修改数据监控登录账户密码" class="sidebar-link">如何修改数据监控登录账户密码</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#分页插件如何手写count查询支持" class="sidebar-link">分页插件如何手写count查询支持</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#如何修改成自定义的cookie名称" class="sidebar-link">如何修改成自定义的Cookie名称</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#如何格式化前端日期时间戳内容" class="sidebar-link">如何格式化前端日期时间戳内容</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#使用https上传文件返回https路径" class="sidebar-link">使用https上传文件返回https路径</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#使用velocity模板引擎兼容-符号" class="sidebar-link">使用Velocity模板引擎兼容$符号</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#如何解决多数据源事务的一致性" class="sidebar-link">如何解决多数据源事务的一致性</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#如何优雅的关闭后台系统服务" class="sidebar-link">如何优雅的关闭后台系统服务</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#如何使用redis实现集群会话管理" class="sidebar-link">如何使用Redis实现集群会话管理</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#如何使用jwt实现登录授权访问控制" class="sidebar-link">如何使用Jwt实现登录授权访问控制</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#如何解决导出使用下载插件出现异常" class="sidebar-link">如何解决导出使用下载插件出现异常</a></li><li class="sidebar-sub-header"><a href="/ruoyi/other/faq.html#如何解决请求地址存在中文出现异常" class="sidebar-link">如何解决请求地址存在中文出现异常</a></li></ul></li><li><a href="/ruoyi/other/donate.html" class="sidebar-link">捐赠支持</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="常见问题"><a href="#常见问题" class="header-anchor">#</a> 常见问题</h1> <h2 id="如何不登录直接访问"><a href="#如何不登录直接访问" class="header-anchor">#</a> 如何不登录直接访问</h2> <p>在<code>ShiroConfig</code>中设置<code>filterChainDefinitionMap</code>配置<code>url=anon</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>	/admins/**=anon               # 表示该 uri 可以匿名访问
	/admins/**=auth               # 表示该 uri 需要认证才能访问
	/admins/**=authcBasic         # 表示该 uri 需要 httpBasic 认证
	/admins/**=perms[user:add:*]  # 表示该 uri 需要认证用户拥有 user:add:* 权限才能访问
	/admins/**=port[8080]         # 表示该 uri 需要使用 8080 端口
	/admins/**=roles[admin]       # 表示该 uri 需要认证用户拥有 admin 角色才能访问
	/admins/**=ssl                # 表示该 uri 需要使用 https 协议
	/admins/**=user               # 表示该 uri 需要认证或通过记住我认证才能访问
	/logout=logout                # 表示注销,可以当作固定配置
	
	注意：
	anon，authcBasic，authc，user 是认证过滤器。
	perms，roles，ssl，rest，port 是授权过滤器。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="如何更换项目包路径"><a href="#如何更换项目包路径" class="header-anchor">#</a> 如何更换项目包路径</h2> <blockquote><p>懒人可以使用<a href="https://gitee.com/lpf_project/common-tools" target="_blank" rel="noopener noreferrer">若依框架包名修改器<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>一键替换。</p></blockquote> <p>1、更换目录名称</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>├── xxxxx
│       └── xxxxx-admin
│       └── xxxxx-common
│       └── xxxxx-framework
│       └── xxxxx-generator
│       └── xxxxx-quartz
│       └── xxxxx-system
│       └── pom.xml
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>2、更换顶级目录中的<code>pom.xml</code></p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modules</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span><span class="token punctuation">&gt;</span></span>xxxxx-admin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>module</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span><span class="token punctuation">&gt;</span></span>xxxxx-framework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>module</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span><span class="token punctuation">&gt;</span></span>xxxxx-system<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>module</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span><span class="token punctuation">&gt;</span></span>xxxxx-quartz<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>module</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span><span class="token punctuation">&gt;</span></span>xxxxx-generator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>module</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span><span class="token punctuation">&gt;</span></span>xxxxx-common<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>module</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modules</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>3、更换项目所有包名称<code>com.ruoyi.xxx</code>换成<code>com.xxxxx.xxx</code></p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>DataScopeAspect，DataSourceAspect，LogAspect
这三个类@Pointcut注解上面的包路径也需要替换com.xxxxx</p> <p>CaptchaConfig
这个类验证码文本生成器参数KAPTCHA_TEXTPRODUCER_IMPL的包路径也需要替换com.xxxxx</p> <p>ApplicationConfig
这个类@MapperScan注解上面的包路径也需要替换com.xxxxx</p></div> <p>4、更换<code>application.yml</code>指定要扫描的<code>Mapper</code>类的包的路径<code>typeAliasesPackage</code>包路径名称替换<code>com.xxxxx</code></p> <div class="language-yml line-numbers-mode"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br></div><pre class="language-yml"><code><span class="token comment"># MyBatis</span>
<span class="token key atrule">mybatis</span><span class="token punctuation">:</span>
    <span class="token comment"># 搜索指定包别名</span>
    <span class="token key atrule">typeAliasesPackage</span><span class="token punctuation">:</span> com.你的包名.<span class="token important">**.domain</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>5、更换<code>mapper</code>文件的<code>namespace</code>包路径</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>ruoyi-system/resources/mapper/system/* 
ruoyi-quartz/resources/mapper/quartz/* 
ruoyi-generator/resources/mapper/generator/*
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>xml</code>包路径名称替换<code>com.xxxxx</code></p> <p>6、更换<code>pom</code>文件内容</p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>以下<code>pom.xml</code>文件中包含<code>ruoyi</code>的关键字替换成<code>xxxxx</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>├── xxxxx
│       └── xxxxx-admin      pom.xml
│       └── xxxxx-common     pom.xml
│       └── xxxxx-framework  pom.xml
│       └── xxxxx-generator  pom.xml
│       └── xxxxx-quartz     pom.xml
│       └── xxxxx-system     pom.xml
│       └── pom.xml
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></div> <p>7、更换日志路径</p> <ul><li>更换<code>application.yml</code>文件<code>logging</code>属性为<code>com.xxxxx: debug</code></li> <li>更换<code>logback.xml</code>文件为<code>com.xxxxx</code></li></ul> <p>8、启动项目验证</p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>到此步骤如能正常启动，表示更换完成。剩余的小细节可以自行调整。</p></div> <h2 id="业务模块访问出现404"><a href="#业务模块访问出现404" class="header-anchor">#</a> 业务模块访问出现404</h2> <p>1、单应用检查</p> <ul><li>确认此用户是否已经配置菜单</li> <li>确认此角色是否已经配置菜单权限</li> <li>确认此菜单<code>url</code>是否和<code>后台地址</code>一致</li></ul> <p>如参数管理，后台地址配置<code>@RequestMapping(&quot;/system/config&quot;)</code>对应参数管理<code>url</code>为<code>/system/config</code></p> <p>2、多模块检查（多了几个步骤）</p> <ul><li><code>pom.xml</code> 引入了业务子系统</li> <li><code>ruoyi-admin</code> 添加业务子模块的依赖</li> <li><code>ruoyi-xxxxx</code> 新增业务模块pom检查配置是否正确</li></ul> <p>PS：IDEA可能存在缓存，需要清理下缓存在编译。</p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>如果业务模块和项目的包名不一致，需要在启动类上指定扫描包路径，如
<code>@SpringBootApplication(exclude = { DataSourceAutoConfiguration.class }, scanBasePackages = { &quot;com.ruoyi.*&quot;, &quot;com.test.*&quot; })</code>
或者加上<code>@ComponentScan({ &quot;com.ruoyi.*&quot;, &quot;com.test.*&quot; })</code></p></div> <h2 id="idea更改页面不重启"><a href="#idea更改页面不重启" class="header-anchor">#</a> IDEA更改页面不重启</h2> <p>经常有小伙伴问到这个问题，为什么我的用IDEA修改html页面之后不实时生效呢？</p> <p>1、修改IDEA设置
<code>File</code> -&gt; <code>Settings</code> -&gt; <code>Build Execution Deployment</code> -&gt;  <code>Build Project automatically</code> 勾选</p> <p>2、勾选Running
<code>Ctrl</code> + <code>Shift</code> + <code>Alt</code> + <code>/</code> 然后选择 <code>Registry</code>，勾上 <code>Compiler.autoMake.allow.when.app.running</code></p> <p>PS：Eclipse开发工具无需任何配置。</p> <h2 id="如何使用多数据源"><a href="#如何使用多数据源" class="header-anchor">#</a> 如何使用多数据源</h2> <p>对于只有两个数据源直接配置<code>slave</code>加入注解即可。</p> <ol><li>在 <code>resources</code> 目录下修改<code>application-druid.yml</code></li></ol> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment"># 从库数据源</span>
<span class="token key atrule">slave</span><span class="token punctuation">:</span>
    <span class="token comment"># 开启从库</span>
    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">url</span><span class="token punctuation">:</span> 数据源
    <span class="token key atrule">username</span><span class="token punctuation">:</span> 用户名
    <span class="token key atrule">password</span><span class="token punctuation">:</span> 密码
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="2"><li>在<code>Service</code>实现中添加<code>DataSource</code>注解</li></ol> <div class="language-java line-numbers-mode"><div class="highlight-lines"><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-java"><code><span class="token annotation punctuation">@DataSource</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token class-name">DataSourceType</span><span class="token punctuation">.</span><span class="token constant">SLAVE</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectUserList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> mapper<span class="token punctuation">.</span><span class="token function">selectUserList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>如果涉及到两个以上数据源，参考配置 <a href="/ruoyi/document/htsc.html#多数据源">多数据源</a></p> <h2 id="如何更换主题皮肤"><a href="#如何更换主题皮肤" class="header-anchor">#</a> 如何更换主题皮肤</h2> <p>1、项目主页-个人信息中选择切换主题</p> <p>2、修改主框架页-默认皮肤，在菜单<code>参数设置</code>修改参数键名<code>sys.index.skinName</code>支持如下几种皮肤</p> <ul><li>蓝色 skin-blue</li> <li>绿色 skin-green</li> <li>紫色 skin-purple</li> <li>红色 skin-red</li> <li>黄色 skin-yellow</li></ul> <p>3、修改主框架页-侧边栏主题，在菜单<code>参数设置</code>修改参数键名<code>sys.index.sideTheme</code>支持如下几种主题</p> <ul><li>深色主题theme-dark</li> <li>浅色主题theme-light</li></ul> <p>注：如需新增修改皮肤主题可以在<code>skins.css</code>中调整</p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>顶部默认主题颜色在<code>skins.css</code></p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token comment">/** 蓝色主题 skin-blue **/</span>
<span class="token selector">.navbar, .skin-blue .navbar</span> <span class="token punctuation">{</span>
	<span class="token property">background-color</span><span class="token punctuation">:</span> #3c8dbc
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>左侧默认主题颜色在<code>static\css\style.css</code></p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.navbar-static-side</span> <span class="token punctuation">{</span>
    <span class="token property">background</span><span class="token punctuation">:</span> #2f4050<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">nav .logo</span> <span class="token punctuation">{</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #367fa9<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></div> <h2 id="如何使用横向菜单"><a href="#如何使用横向菜单" class="header-anchor">#</a> 如何使用横向菜单</h2> <p>默认的导航菜单都是在左侧，如果需要横向导航菜单可以做如下配置。</p> <p>1、点击顶部最右侧个人中心头像，切换为横向菜单。（局部设置）</p> <p>2、在参数管理设置<code>主框架页-菜单导航显示风格</code>，键值为<code>topnav</code>为顶部导航菜单。（全局设置）</p> <h2 id="如何获取用户登录信息"><a href="#如何获取用户登录信息" class="header-anchor">#</a> 如何获取用户登录信息</h2> <ol><li>第一种方法</li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 获取当前的用户信息</span>
<span class="token class-name">User</span> currentUser <span class="token operator">=</span> <span class="token class-name">ShiroUtils</span><span class="token punctuation">.</span><span class="token function">getSysUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获取当前的用户名称</span>
<span class="token class-name">String</span> userName <span class="token operator">=</span> currentUser<span class="token punctuation">.</span><span class="token function">getUserName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol start="2"><li>第二种方法（子模块可使用）</li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 获取当前的用户名称</span>
<span class="token class-name">String</span> userName <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token class-name">PermissionUtils</span><span class="token punctuation">.</span><span class="token function">getPrincipalProperty</span><span class="token punctuation">(</span><span class="token string">&quot;userName&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>3、界面获取当前用户信息（支持任意th标签）</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name"><span class="token namespace">th:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${@permission.getPrincipalProperty('userName')}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>4、js中获取当前用户信息</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> userName <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>$<span class="token punctuation">{</span>@permission<span class="token punctuation">.</span><span class="token function">getPrincipalProperty</span><span class="token punctuation">(</span><span class="token string">'userName'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="如何防止请求重复提交"><a href="#如何防止请求重复提交" class="header-anchor">#</a> 如何防止请求重复提交</h2> <ol><li>前端通过<code>js</code>控制</li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 禁用按钮</span>
$<span class="token punctuation">.</span>modal<span class="token punctuation">.</span><span class="token function">disable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 启用按钮</span>
$<span class="token punctuation">.</span>modal<span class="token punctuation">.</span><span class="token function">enable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol start="2"><li>后端通过<code>@RepeatSubmit</code>注解控制</li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
 * 在对应方法添加注解 @RepeatSubmit
 */</span>
<span class="token annotation punctuation">@RepeatSubmit</span>
<span class="token keyword">public</span> <span class="token class-name">AjaxResult</span> <span class="token function">editSave</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="如何配置允许跨域访问"><a href="#如何配置允许跨域访问" class="header-anchor">#</a> 如何配置允许跨域访问</h2> <p>现在开发的项目一般都是前后端分离的项目，所以跨域访问会经常使用。</p> <p>1、单个控制器方法<code>CORS</code>注解</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/system/test&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@CrossOrigin</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">AjaxResult</span> <span class="token function">getUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Integer</span> userId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
	
	<span class="token annotation punctuation">@DeleteMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/{userId}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">AjaxResult</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Integer</span> userId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>2、整个控制器启用<code>CORS</code>注解</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@CrossOrigin</span><span class="token punctuation">(</span>origins <span class="token operator">=</span> <span class="token string">&quot;http://ruoyi.vip&quot;</span><span class="token punctuation">,</span> maxAge <span class="token operator">=</span> <span class="token number">3600</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/system/test&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">AjaxResult</span> <span class="token function">getUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Integer</span> userId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
	
	<span class="token annotation punctuation">@DeleteMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/{userId}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">AjaxResult</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Integer</span> userId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>3、全局<code>CORS</code>配置（在<code>ResourcesConfig</code>重写<code>addCorsMappings</code>方法）</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
 * web跨域访问配置
 */</span>
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addCorsMappings</span><span class="token punctuation">(</span><span class="token class-name">CorsRegistry</span> registry<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// 设置允许跨域的路径</span>
	registry<span class="token punctuation">.</span><span class="token function">addMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/**&quot;</span><span class="token punctuation">)</span>
			<span class="token comment">// 设置允许跨域请求的域名</span>
			<span class="token punctuation">.</span><span class="token function">allowedOrigins</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span>
			<span class="token comment">// 是否允许证书</span>
			<span class="token punctuation">.</span><span class="token function">allowCredentials</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
			<span class="token comment">// 设置允许的方法</span>
			<span class="token punctuation">.</span><span class="token function">allowedMethods</span><span class="token punctuation">(</span><span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;DELETE&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;PUT&quot;</span><span class="token punctuation">)</span>
			<span class="token comment">// 设置允许的header属性</span>
			<span class="token punctuation">.</span><span class="token function">allowedHeaders</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span>
			<span class="token comment">// 跨域允许时间</span>
			<span class="token punctuation">.</span><span class="token function">maxAge</span><span class="token punctuation">(</span><span class="token number">3600</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="如何实现滑块验证码"><a href="#如何实现滑块验证码" class="header-anchor">#</a> 如何实现滑块验证码</h2> <p><a href="/ruoyi/document/cjjc.html#集成aj-captcha实现滑块验证码">参考集成aj-captcha实现滑块验证码</a></p> <h2 id="日期插件精确到时分秒"><a href="#日期插件精确到时分秒" class="header-anchor">#</a> 日期插件精确到时分秒</h2> <p>1、界面设置时间格式<code>data-format</code>，选择类型<code>data-type</code>属性。</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- data-type=&quot;date&quot;（年）| data-type=&quot;month（月）| data-type=&quot;date&quot;（日）| data-type=&quot;time&quot;（时、分、秒）| data-type=&quot;datetime&quot;（年、月、日、时、分、秒） --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>select-time<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span>创建时间： <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>time-input<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>开始时间<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>params[beginTime]<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>datetime<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-format</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>yyyy-MM-dd HH:mm:ss<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>-<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>time-input<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>结束时间<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>params[endTime]<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>month<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-format</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>yyyy-MM<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>2、通过js函数设置	
<code>datetimepicker</code>日期控件可以设置<code>format</code></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.input-group.date'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">datetimepicker</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token string">'yyyy-mm-dd hh:ii:ss'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">autoclose</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">minView</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token literal-property property">minuteStep</span><span class="token operator">:</span><span class="token number">1</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><code>laydate</code>日期控件可以设置<code>common.js</code> 配置<code>type=datetime</code></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>layui<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'laydate'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> laydate <span class="token operator">=</span> layui<span class="token punctuation">.</span>laydate<span class="token punctuation">;</span>
	<span class="token keyword">var</span> startDate <span class="token operator">=</span> laydate<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token literal-property property">elem</span><span class="token operator">:</span> <span class="token string">'#startTime'</span><span class="token punctuation">,</span>
		<span class="token literal-property property">max</span><span class="token operator">:</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#endTime'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token literal-property property">theme</span><span class="token operator">:</span> <span class="token string">'molv'</span><span class="token punctuation">,</span>
		<span class="token literal-property property">trigger</span><span class="token operator">:</span> <span class="token string">'click'</span><span class="token punctuation">,</span>
		<span class="token literal-property property">type</span> <span class="token operator">:</span> <span class="token string">'datetime'</span><span class="token punctuation">,</span>
		<span class="token function-variable function">done</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> date</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// 结束时间大于开始时间</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">!==</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				endDate<span class="token punctuation">.</span>config<span class="token punctuation">.</span>min<span class="token punctuation">.</span>year <span class="token operator">=</span> date<span class="token punctuation">.</span>year<span class="token punctuation">;</span>
				endDate<span class="token punctuation">.</span>config<span class="token punctuation">.</span>min<span class="token punctuation">.</span>month <span class="token operator">=</span> date<span class="token punctuation">.</span>month <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
				endDate<span class="token punctuation">.</span>config<span class="token punctuation">.</span>min<span class="token punctuation">.</span>date <span class="token operator">=</span> date<span class="token punctuation">.</span>date<span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				endDate<span class="token punctuation">.</span>config<span class="token punctuation">.</span>min<span class="token punctuation">.</span>year <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
				endDate<span class="token punctuation">.</span>config<span class="token punctuation">.</span>min<span class="token punctuation">.</span>month <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
				endDate<span class="token punctuation">.</span>config<span class="token punctuation">.</span>min<span class="token punctuation">.</span>date <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">var</span> endDate <span class="token operator">=</span> laydate<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token literal-property property">elem</span><span class="token operator">:</span> <span class="token string">'#endTime'</span><span class="token punctuation">,</span>
		<span class="token literal-property property">min</span><span class="token operator">:</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#startTime'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token literal-property property">theme</span><span class="token operator">:</span> <span class="token string">'molv'</span><span class="token punctuation">,</span>
		<span class="token literal-property property">trigger</span><span class="token operator">:</span> <span class="token string">'click'</span><span class="token punctuation">,</span>
		<span class="token literal-property property">type</span> <span class="token operator">:</span> <span class="token string">'datetime'</span><span class="token punctuation">,</span>
		<span class="token function-variable function">done</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> date</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// 开始时间小于结束时间</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">!==</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				startDate<span class="token punctuation">.</span>config<span class="token punctuation">.</span>max<span class="token punctuation">.</span>year <span class="token operator">=</span> date<span class="token punctuation">.</span>year<span class="token punctuation">;</span>
				startDate<span class="token punctuation">.</span>config<span class="token punctuation">.</span>max<span class="token punctuation">.</span>month <span class="token operator">=</span> date<span class="token punctuation">.</span>month <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
				startDate<span class="token punctuation">.</span>config<span class="token punctuation">.</span>max<span class="token punctuation">.</span>date <span class="token operator">=</span> date<span class="token punctuation">.</span>date<span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				startDate<span class="token punctuation">.</span>config<span class="token punctuation">.</span>max<span class="token punctuation">.</span>year <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
				startDate<span class="token punctuation">.</span>config<span class="token punctuation">.</span>max<span class="token punctuation">.</span>month <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
				startDate<span class="token punctuation">.</span>config<span class="token punctuation">.</span>max<span class="token punctuation">.</span>date <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><h2 id="代码生成不显示新建表"><a href="#代码生成不显示新建表" class="header-anchor">#</a> 代码生成不显示新建表</h2> <p>默认条件需要表注释，特殊情况可在<code>GenMapper.xml</code>去除<code>table_comment</code>条件</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectTableByName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>String<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>TableInfoResult<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">refid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectGenVo<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
	where table_comment &lt;&gt; '' and table_schema = (select database())
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">提示</p> <p>如果版本&gt;=4.0不需要表注解，在代码生成页面导入即可。</p></div> <h2 id="提示您没有数据的权限"><a href="#提示您没有数据的权限" class="header-anchor">#</a> 提示您没有数据的权限</h2> <p>这种情况都属于权限标识配置不对在<code>菜单管理</code>配置好权限标识（菜单&amp;按钮）</p> <ol><li>确认此用户是否已经配置角色</li> <li>确认此角色是否已经配置菜单权限</li> <li>确认此菜单权限标识是否和后台代码一致</li></ol> <p>如参数管理<br>
后台配置<code>@RequiresPermissions(&quot;system:config:view&quot;)</code>对应参数管理权限标识为<code>system:config:view</code></p> <p>注：如需要角色权限，配置角色权限字符 使用<code>@RequiresRoles(&quot;admin&quot;)</code></p> <h2 id="富文本编辑器文件上传"><a href="#富文本编辑器文件上传" class="header-anchor">#</a> 富文本编辑器文件上传</h2> <p>富文本控件采用的<code>summernote</code>，图片上传处理需要设置<code>callbacks</code>函数</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.summernote'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">summernote</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">height</span> <span class="token operator">:</span> <span class="token string">'220px'</span><span class="token punctuation">,</span>
	<span class="token literal-property property">lang</span> <span class="token operator">:</span> <span class="token string">'zh-CN'</span><span class="token punctuation">,</span>
	<span class="token literal-property property">callbacks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token function-variable function">onImageUpload</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">files<span class="token punctuation">,</span> editor<span class="token punctuation">,</span> $editable</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;file&quot;</span><span class="token punctuation">,</span> files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	            <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span>
	            <span class="token literal-property property">url</span><span class="token operator">:</span> ctx <span class="token operator">+</span> <span class="token string">&quot;common/upload&quot;</span><span class="token punctuation">,</span>
	            <span class="token literal-property property">data</span><span class="token operator">:</span> data<span class="token punctuation">,</span>
	            <span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
	            <span class="token literal-property property">contentType</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
	            <span class="token literal-property property">processData</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
	            <span class="token literal-property property">dataType</span><span class="token operator">:</span> <span class="token string">'json'</span><span class="token punctuation">,</span>
	            <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	                <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>code <span class="token operator">==</span> web_status<span class="token punctuation">.</span><span class="token constant">SUCCESS</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	                	<span class="token function">$</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">summernote</span><span class="token punctuation">(</span><span class="token string">'editor.insertImage'</span><span class="token punctuation">,</span> result<span class="token punctuation">.</span>url<span class="token punctuation">,</span> result<span class="token punctuation">.</span>fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
						$<span class="token punctuation">.</span>modal<span class="token punctuation">.</span><span class="token function">alertError</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
	            <span class="token punctuation">}</span><span class="token punctuation">,</span>
	            <span class="token function-variable function">error</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	                $<span class="token punctuation">.</span>modal<span class="token punctuation">.</span><span class="token function">alertWarning</span><span class="token punctuation">(</span><span class="token string">&quot;图片上传失败。&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	            <span class="token punctuation">}</span>
	        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h2 id="富文本编辑器底部回弹"><a href="#富文本编辑器底部回弹" class="header-anchor">#</a> 富文本编辑器底部回弹</h2> <p>富文本控件采用的<code>summernote</code>，如果不需要底部回弹设置<code>followingToolbar: false</code></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.summernote'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">summernote</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'请输入公告内容'</span><span class="token punctuation">,</span>
	<span class="token literal-property property">height</span> <span class="token operator">:</span> <span class="token number">192</span><span class="token punctuation">,</span>
	<span class="token literal-property property">lang</span> <span class="token operator">:</span> <span class="token string">'zh-CN'</span><span class="token punctuation">,</span>
	<span class="token literal-property property">followingToolbar</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
	<span class="token literal-property property">callbacks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token function-variable function">onImageUpload</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">files</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token function">sendFile</span><span class="token punctuation">(</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="富文本对话框回弹顶部"><a href="#富文本对话框回弹顶部" class="header-anchor">#</a> 富文本对话框回弹顶部</h2> <p>富文本控件采用的<code>summernote</code>，点击下方的各种按钮的弹框时，页面会回到顶部，滚到顶部会使用户体验很不好，如需要置于弹框的<code>body</code>中，可以设置<code>dialogsInBody: true</code></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.summernote'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">summernote</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'请输入公告内容'</span><span class="token punctuation">,</span>
	<span class="token literal-property property">height</span> <span class="token operator">:</span> <span class="token number">192</span><span class="token punctuation">,</span>
	<span class="token literal-property property">lang</span> <span class="token operator">:</span> <span class="token string">'zh-CN'</span><span class="token punctuation">,</span>
	<span class="token literal-property property">dialogsInBody</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
	<span class="token literal-property property">callbacks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token function-variable function">onImageUpload</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">files</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token function">sendFile</span><span class="token punctuation">(</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="如何创建新的菜单页签"><a href="#如何创建新的菜单页签" class="header-anchor">#</a> 如何创建新的菜单页签</h2> <p>创建新的页签有以下两种方式（js&amp;html）</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 方式1 打开新的选项卡</span>
<span class="token keyword">function</span> <span class="token function">dept</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> url <span class="token operator">=</span> ctx <span class="token operator">+</span> <span class="token string">&quot;system/dept&quot;</span><span class="token punctuation">;</span>
	$<span class="token punctuation">.</span>modal<span class="token punctuation">.</span><span class="token function">openTab</span><span class="token punctuation">(</span><span class="token string">&quot;部门管理&quot;</span><span class="token punctuation">,</span> url<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 如果需要打开并刷新 $.modal.openTab(&quot;部门管理&quot;, url, true);</span>
<span class="token punctuation">}</span>

<span class="token comment">// 方式2 选卡页同一页签打开</span>
<span class="token keyword">function</span> <span class="token function">dept</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> url <span class="token operator">=</span> ctx <span class="token operator">+</span> <span class="token string">&quot;system/dept&quot;</span><span class="token punctuation">;</span>
	$<span class="token punctuation">.</span>modal<span class="token punctuation">.</span><span class="token function">parentTab</span><span class="token punctuation">(</span><span class="token string">&quot;部门管理&quot;</span><span class="token punctuation">,</span> url<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 方式3 html创建</span>
<span class="token operator">&lt;</span>a <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;menuItem&quot;</span> href<span class="token operator">=</span><span class="token string">&quot;/system/dept&quot;</span><span class="token operator">&gt;</span>部门管理<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
<span class="token comment">// 如果需要打开并刷新 </span>
<span class="token operator">&lt;</span>a <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;menuItem&quot;</span> data<span class="token operator">-</span>refresh<span class="token operator">=</span><span class="token string">&quot;true&quot;</span> href<span class="token operator">=</span><span class="token string">&quot;/system/dept&quot;</span><span class="token operator">&gt;</span>部门管理<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="表格数据进行汇总统计"><a href="#表格数据进行汇总统计" class="header-anchor">#</a> 表格数据进行汇总统计</h2> <p>对于某些数据需要对金额，数量等进行汇总，可以配置<code>showFooter: true</code>表示尾部统计</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// options 选项中添加尾部统计</span>
<span class="token literal-property property">showFooter</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> 
<span class="token comment">// columns 中添加   </span>
<span class="token punctuation">{</span>
	<span class="token literal-property property">field</span> <span class="token operator">:</span> <span class="token string">'balance'</span><span class="token punctuation">,</span>
	<span class="token literal-property property">title</span> <span class="token operator">:</span> <span class="token string">'余额'</span><span class="token punctuation">,</span>
	<span class="token literal-property property">sortable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
	<span class="token function-variable function">footerFormatter</span><span class="token operator">:</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> sumBalance <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token keyword">in</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			sumBalance <span class="token operator">+=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>value<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>balance<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token string">&quot;总金额：&quot;</span> <span class="token operator">+</span> sumBalance<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="表格设置行列单元格样式"><a href="#表格设置行列单元格样式" class="header-anchor">#</a> 表格设置行列单元格样式</h2> <p>1、<code>options</code>参数中配置属性</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token literal-property property">rowStyle</span><span class="token operator">:</span> rowStyle<span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>2、对应js添加响应方法（根据<code>row</code>或<code>index</code>定义规则）即可</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">rowStyle</span><span class="token punctuation">(</span><span class="token parameter">row<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> style <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">css</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">'color'</span><span class="token operator">:</span> <span class="token string">'#ed5565'</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> style<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="文件上传大小限制配置"><a href="#文件上传大小限制配置" class="header-anchor">#</a> 文件上传大小限制配置</h2> <p><code>Spring Boot</code>默认最大<code>request size</code>为<code>10MB(1048576 bytes)</code>。</p> <p>如果超出默认大小会提示异常信息。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Maximum upload size exceeded; nested exception is java.lang.IllegalStateException: org.apache.tomcat.util.http.fileupload.FileUploadBase$FileSizeLimitExceededException: The field avatarfile exceeds its maximum permitted size of 10485760 bytes.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>可以通过配置文件增加以下内容解决:</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">servlet</span><span class="token punctuation">:</span>
    <span class="token key atrule">multipart</span><span class="token punctuation">:</span>
      <span class="token comment"># 文件最大</span>
      <span class="token key atrule">max-file-size</span><span class="token punctuation">:</span> 20MB
      <span class="token comment"># 设置总上传数据总大小  </span>
      <span class="token key atrule">max-request-size</span><span class="token punctuation">:</span> 20MB
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="如何去除文件上传按钮"><a href="#如何去除文件上传按钮" class="header-anchor">#</a> 如何去除文件上传按钮</h2> <p>在一些特定情况不需要文件上传的小图标操作，可以把他们去掉。</p> <p>这里<code>layoutTemplates</code>为上传控件模板，可以在这里重写上传控件中的元素样式</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#xxxx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fileinput</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token punctuation">.</span>
	<span class="token literal-property property">layoutTemplates</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">actionDelete</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
		<span class="token literal-property property">actionUpload</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
		<span class="token literal-property property">actionZoom</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
		<span class="token literal-property property">indicator</span><span class="token operator">:</span> <span class="token string">''</span>
		<span class="token operator">...</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token operator">...</span><span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="如何去除数据监控广告"><a href="#如何去除数据监控广告" class="header-anchor">#</a> 如何去除数据监控广告</h2> <p>服务监控中使用的<code>Driud</code>，默认底部有阿里的广告。如果是一个商业项目这个是很不雅也是不允许的</p> <ol><li>找到本地maven库中的对应的druid-1.1.xx.jar文件，用压缩包软件打开</li> <li>找到support/http/resource/js/common.js, 打开找到 buildFooter 方法</li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">buildFooter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function-variable function">buildFooter</span> <span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> html <span class="token operator">=</span><span class="token string">'此处省略一些相关JS代码'</span><span class="token punctuation">;</span>
	<span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ol start="3"><li>删除此函数和及初始方法后覆盖文件</li> <li>重启项目后，广告就会消失了</li></ol> <h2 id="如何支持多类型数据库"><a href="#如何支持多类型数据库" class="header-anchor">#</a> 如何支持多类型数据库</h2> <p>对于某些特殊需要支持不同数据库，参考以下支持<code>oracle</code> <code>mysql</code>配置</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--oracle驱动--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.oracle<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>ojdbc6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>11.2.0.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment"># 数据源配置</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
    <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> com.alibaba.druid.pool.DruidDataSource
        <span class="token key atrule">druid</span><span class="token punctuation">:</span>
            <span class="token comment"># 主库数据源</span>
            <span class="token key atrule">master</span><span class="token punctuation">:</span>
                <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//127.0.0.1<span class="token punctuation">:</span>3306/ry<span class="token punctuation">?</span>useUnicode=true<span class="token important">&amp;characterEncoding=utf8&amp;zeroDateTimeBehavior=convertToNull&amp;useSSL=true&amp;serverTimezone=GMT%2B8</span>
                <span class="token key atrule">username</span><span class="token punctuation">:</span> root
                <span class="token key atrule">password</span><span class="token punctuation">:</span> password
                <span class="token key atrule">validationQuery</span><span class="token punctuation">:</span> select 1
            <span class="token comment"># 从库数据源</span>
            <span class="token key atrule">slave</span><span class="token punctuation">:</span>
                <span class="token comment"># 从数据源开关/默认关闭</span>
                <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
                <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>oracle<span class="token punctuation">:</span>thin<span class="token punctuation">:</span>@127.0.0.1<span class="token punctuation">:</span>1521<span class="token punctuation">:</span>oracle
                <span class="token key atrule">username</span><span class="token punctuation">:</span> root
                <span class="token key atrule">password</span><span class="token punctuation">:</span> password
                <span class="token key atrule">validationQuery</span><span class="token punctuation">:</span> select 1 from dual
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">提示</p> <p><code>对于不同数据源造成的驱动问题，可以删除</code>driverClassName<code>，默认会自动识别驱动</code><br> <code>如需要对不同数据源分页需要操作</code>application.yml<code>中的</code>pagehelper<code>配置中删除</code>helperDialect: mysql<code>会自动识别数据源，新增</code>autoRuntimeDialect=true<code>表示运行时获取数据源</code></p></div> <h2 id="如何实现翻页保留选择"><a href="#如何实现翻页保留选择" class="header-anchor">#</a> 如何实现翻页保留选择</h2> <ol><li>配置<code>checkbox</code>选项<code>field</code>属性为<code>state</code></li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span>
	<span class="token literal-property property">field</span><span class="token operator">:</span> <span class="token string">'state'</span><span class="token punctuation">,</span>
	<span class="token literal-property property">checkbox</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol start="2"><li>表格选项<code>options</code>添加<code>rememberSelected</code></li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token literal-property property">rememberSelected</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="如何实现跳转至指定页"><a href="#如何实现跳转至指定页" class="header-anchor">#</a> 如何实现跳转至指定页</h2> <ol><li>表格选项<code>options</code>添加<code>showPageGo</code></li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token literal-property property">showPageGo</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="如何自定义查询条件参数"><a href="#如何自定义查询条件参数" class="header-anchor">#</a> 如何自定义查询条件参数</h2> <p>1、在<code>options</code>中添加<code>queryParams</code>参数</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">url</span><span class="token operator">:</span> prefix <span class="token operator">+</span> <span class="token string">&quot;/list&quot;</span><span class="token punctuation">,</span>
	<span class="token literal-property property">queryParams</span><span class="token operator">:</span> queryParams<span class="token punctuation">,</span>
	<span class="token literal-property property">columns</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
		<span class="token literal-property property">field</span><span class="token operator">:</span> <span class="token string">'id'</span><span class="token punctuation">,</span>
		<span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'主键'</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">{</span>
		<span class="token literal-property property">field</span><span class="token operator">:</span> <span class="token string">'name'</span><span class="token punctuation">,</span>
		<span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'名称'</span>
	<span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
$<span class="token punctuation">.</span>table<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>2、在当前页添加<code>queryParams</code>方法设置自定义查询条件如<code>userName</code></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">queryParams</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> search <span class="token operator">=</span> $<span class="token punctuation">.</span>table<span class="token punctuation">.</span><span class="token function">queryParams</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
	search<span class="token punctuation">.</span>userName <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#userName&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> search<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>请求后台参数为：pageSize、pageNum、searchValue、orderByColumn、isAsc、<code>userName</code></p> <p>3、如果是表格树，添加参数<code>ajaxParams</code>参数</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">&quot;deptId&quot;</span><span class="token punctuation">,</span>
	<span class="token literal-property property">parentCode</span><span class="token operator">:</span> <span class="token string">&quot;parentId&quot;</span><span class="token punctuation">,</span>
	<span class="token literal-property property">uniqueId</span><span class="token operator">:</span> <span class="token string">&quot;deptId&quot;</span><span class="token punctuation">,</span>
	<span class="token literal-property property">url</span><span class="token operator">:</span> prefix <span class="token operator">+</span> <span class="token string">&quot;/list&quot;</span><span class="token punctuation">,</span>
	<span class="token literal-property property">ajaxParams</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string-property property">&quot;userId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;userName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ruoyi&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token literal-property property">columns</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
		<span class="token literal-property property">field</span><span class="token operator">:</span> <span class="token string">'id'</span><span class="token punctuation">,</span>
		<span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'主键'</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">{</span>
		<span class="token literal-property property">field</span><span class="token operator">:</span> <span class="token string">'name'</span><span class="token punctuation">,</span>
		<span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'名称'</span>
	<span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
$<span class="token punctuation">.</span>treeTable<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="如何让表格某些列隐藏掉"><a href="#如何让表格某些列隐藏掉" class="header-anchor">#</a> 如何让表格某些列隐藏掉</h2> <p>1、在<code>options</code>中<code>columns</code>设置<code>visible</code></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token literal-property property">visible</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>  <span class="token comment">// 隐藏某列（列选项可见）</span>
<span class="token literal-property property">ignore</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>    <span class="token comment">// 列选项不可见</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>对于需要列选项不可见状态可以设置<code>ignore</code></p> <h2 id="如何给默认的表格加边框"><a href="#如何给默认的表格加边框" class="header-anchor">#</a> 如何给默认的表格加边框</h2> <p><code>table-striped</code> 换成 <code>table-bordered</code></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>col-sm-12 select-table table-bordered<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bootstrap-table<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">提示</p> <p>如果是表格树加边框还需要在<code>options</code>添加<code>bordered:true</code></p></div> <h2 id="普通用户创建文件无权限"><a href="#普通用户创建文件无权限" class="header-anchor">#</a> 普通用户创建文件无权限</h2> <p>常见的有几种错误，对应去调整即可。</p> <p>1、修改<code>logback.xml</code>，value路径</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- 日志存放路径 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>log.path<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/home/ruoyi/logs<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>2、修改<code>ehcache-shiro.xml</code>，path路径</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>diskStore</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>java.io.tmpdir<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>3、修改<code>tomcat</code>临时的日志目录</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">tomcat</span><span class="token punctuation">:</span>
    <span class="token key atrule">basedir</span><span class="token punctuation">:</span> /home/ruoyi/temp
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="druid关闭掉ping的方式"><a href="#druid关闭掉ping的方式" class="header-anchor">#</a> Druid关闭掉ping的方式</h2> <p>在使用了新版的<code>druid</code>以后，日志中会一直在报<code>warn</code>，内容是<code>discard long time none received connection. , jdbcUrl : ...</code>，程序运行并没有受到影响，只是会不定时有警告，解决方案是可以回退到<code>1.1.22</code>可以消除警告，也可以通过关闭<code>mysql</code>的<code>usePingMethod</code>关闭<code>ping</code>检查。</p> <p><strong>启动类的main方法关闭usePingMethod</strong></p> <div class="language-java line-numbers-mode"><div class="highlight-lines"><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RuoYiApplication</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// System.setProperty(&quot;spring.devtools.restart.enabled&quot;, &quot;false&quot;);</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&quot;druid.mysql.usePingMethod&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;false&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">RuoYiApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;(♥◠‿◠)ﾉﾞ  若依启动成功   ლ(´ڡ`ლ)ﾞ  \n&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot; .-------.       ____     __        \n&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot; |  _ _   \\      \\   \\   /  /    \n&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot; | ( ' )  |       \\  _. /  '       \n&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot; |(_ o _) /        _( )_ .'         \n&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot; | (_,_).' __  ___(_ o _)'          \n&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot; |  |\\ \\  |  ||   |(_,_)'         \n&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot; |  | \\ `'   /|   `-'  /           \n&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot; |  |  \\    /  \\      /           \n&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot; ''-'   `'-'    `-..-'              &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">问题相关issues</p> <p><a href="https://github.com/alibaba/druid/issues/3873" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/druid/issues/3873<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <h2 id="如何降低mysql驱动版本"><a href="#如何降低mysql驱动版本" class="header-anchor">#</a> 如何降低mysql驱动版本</h2> <p>1、在<code>pom.xml</code>中<code>properties</code>新增节点如：</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mysql.version</span><span class="token punctuation">&gt;</span></span>6.0.6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mysql.version</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>2、单应用可以不添加，多模块需要在<code>dependencyManagement</code>声明依赖</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- Mysql驱动包 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${mysql.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>注意：如果是6以下的版本需要修改<code>application-druid.yml</code>中<code>driverClassName</code><br>
com.mysql.jdbc.Driver     是 mysql-connector-java 5中的<br>
com.mysql.cj.jdbc.Driver  是 mysql-connector-java 6中的</p> <h2 id="如何配置tomcat访问日志"><a href="#如何配置tomcat访问日志" class="header-anchor">#</a> 如何配置tomcat访问日志</h2> <p>1、修改<code>application.yml</code>中的<code>server</code>开发环境配置</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token comment"># 开发环境配置</span>
<span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token comment"># 服务器的HTTP端口，默认为80</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>
  <span class="token key atrule">servlet</span><span class="token punctuation">:</span>
    <span class="token comment"># 应用的访问路径</span>
    <span class="token key atrule">context-path</span><span class="token punctuation">:</span> /
  <span class="token key atrule">tomcat</span><span class="token punctuation">:</span>
    <span class="token comment"># 存放Tomcat的日志目录</span>
    <span class="token key atrule">basedir</span><span class="token punctuation">:</span> D<span class="token punctuation">:</span>/tomcat
    <span class="token key atrule">accesslog</span><span class="token punctuation">:</span> 
        <span class="token comment"># 开启日志记录</span>
        <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
        <span class="token comment"># 访问日志存放目录</span>
        <span class="token key atrule">directory</span><span class="token punctuation">:</span> logs
    <span class="token comment"># tomcat的URI编码</span>
    <span class="token key atrule">uri-encoding</span><span class="token punctuation">:</span> UTF<span class="token punctuation">-</span><span class="token number">8</span>
    <span class="token comment"># tomcat最大线程数，默认为200</span>
    <span class="token key atrule">max-threads</span><span class="token punctuation">:</span> <span class="token number">800</span>
    <span class="token comment"># Tomcat启动初始化的线程数，默认值25</span>
    <span class="token key atrule">min-spare-threads</span><span class="token punctuation">:</span> <span class="token number">30</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>2、重启项目后，在<code>D:/tomcat/logs</code>目录就可以看到服务器访问日志了</p> <h2 id="如何配置包路径日志级别"><a href="#如何配置包路径日志级别" class="header-anchor">#</a> 如何配置包路径日志级别</h2> <p>例如<code>echache</code>日志级别默认是<code>info</code>，我们需要修改<code>ehcache</code>的日志级别<code>warn</code></p> <p>可通过<code>application.yml</code>中的<code>logging.level</code>控制。设置对应包路径日志级别。</p> <div class="language-yml line-numbers-mode"><div class="highlight-lines"><br><br><br><br><br><div class="highlighted"> </div><br></div><pre class="language-yml"><code><span class="token comment"># 日志配置</span>
<span class="token key atrule">logging</span><span class="token punctuation">:</span>
  <span class="token key atrule">level</span><span class="token punctuation">:</span>
    <span class="token key atrule">com.ruoyi</span><span class="token punctuation">:</span> debug
    <span class="token key atrule">org.springframework</span><span class="token punctuation">:</span> warn
    <span class="token key atrule">org.apache.shiro.cache.ehcache</span><span class="token punctuation">:</span> warn
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>同时在<code>logback.xml</code>文件新增<code>logger</code>节点</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>logger</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.apache.shiro.cache.ehcache<span class="token punctuation">&quot;</span></span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>warn<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="如何配置项目访问根路径"><a href="#如何配置项目访问根路径" class="header-anchor">#</a> 如何配置项目访问根路径</h2> <p>目前项目后台访问默认路径是：<code>http://localhost:80</code>，如果需要自定义<code>项目名</code>或<code>端口</code>可以修改配置文件<code>src/main/resources/application.yml</code></p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8080</span>
  <span class="token key atrule">servlet</span><span class="token punctuation">:</span>
     <span class="token key atrule">context-path</span><span class="token punctuation">:</span> /ruoyi
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>此配置后访问的默认路径是：<code>http://localhost:8080/ruoyi</code></p> <h2 id="swagger的启用和禁用"><a href="#swagger的启用和禁用" class="header-anchor">#</a> Swagger的启用和禁用</h2> <p>可通过<code>application.yml</code>中的<code>swagger.enable</code>控制。为<code>true</code>时表示启用，为<code>false</code>时表示禁用。</p> <div class="custom-block warning"><p class="custom-block-title">记得关闭</p> <p>为了系统安全，通常生产环境不建议开启swagger。</p></div> <h2 id="如何汉化系统接口swagger"><a href="#如何汉化系统接口swagger" class="header-anchor">#</a> 如何汉化系统接口Swagger</h2> <p>想必很多小伙伴都曾经使用过<code>Swagger</code>，但是打开UI界面是纯英文的界面并不太友好，作为国人还是习惯中文界面。</p> <ol><li>找到m2/repository/io/springfox/springfox-swagger-ui/x.x.x/springfox-swagger-ui-x.x.x.jar</li> <li>修改对应springfox-swagger-ui-x.x.x.jar包内<code>resources</code>目录下<code>swagger-ui.html</code>，添加如下JS代码</li></ol> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- 选择中文版 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>webjars/springfox-swagger-ui/lang/translator.js<span class="token punctuation">'</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>text/javascript<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>webjars/springfox-swagger-ui/lang/zh-cn.js<span class="token punctuation">'</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>text/javascript<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ol start="2"><li>本地修改结束后，在覆盖压缩包文件重启就实现汉化了</li></ol> <h2 id="swagger接口出现转换错误"><a href="#swagger接口出现转换错误" class="header-anchor">#</a> Swagger接口出现转换错误</h2> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Failed to convert property value of type 'java.lang.String' to required type 'java.util.Map' for property 'params'; nested exception is java.lang.IllegalStateException: Cannot convert value of type 'java.lang.String' to required type 'java.util.Map' for property 'params': no matching editors or conversion strategy found&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">500</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>一般在<code>Swagger</code>页面执行查询接口时出现。<code>params</code>是<code>BaseEntity.java</code>的属性，请求的时候把默认的值<code>{}</code>置空就行了。</p> <p>如果不想看到他，<code>BaseEntity.java</code>中的<code>params</code>参数加上<code>@ApiModelProperty(hidden = true)</code></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/** 请求参数 */</span>
<span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span>hidden <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> params<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="如何在html页面格式化日期"><a href="#如何在html页面格式化日期" class="header-anchor">#</a> 如何在html页面格式化日期</h2> <p>Thymeleaf主要使用<code>org.thymeleaf.expression.Dates</code>这个类来处理日期，在模板中使用&quot;#dates&quot;来表示这个对象。</p> <p>1、格式化日期<br> <code>[[${#dates.format(date)}]]</code> 或 <code>th:text=&quot;${#dates.format(date)}</code><br> <code>[[${#dates.formatISO(date)}]]</code> 或 <code>th:text=&quot;${#dates.formatISO(date)}</code><br> <code>[[${#dates.format(date, 'yyyy-MM-dd HH:mm:ss')}]]</code> 或 <code>th:text=&quot;${#dates.format(date, 'yyyy-MM-dd HH:mm:ss')}</code></p> <p>2、获取日期字段<br>
获取当前的年份：<code>[[${#dates.year(date)}]]</code><br>
获取当前的月份：<code>[[${#dates.month(date)}]]</code><br>
获取当月的天数：<code>[[${#dates.day(date)}]]</code><br>
获取当前的小时：<code>[[${#dates.hour(date)}]]</code><br>
获取当前的分钟：<code>[[${#dates.minute(date)}]]</code><br>
获取当前的秒数：<code>[[${#dates.second(date)}]]</code><br>
获取当前的毫秒：<code>[[${#dates.millisecond(date)}]]</code><br>
获取当前的月份名称：<code>[[${#dates.monthName(date)}]]</code><br>
获取当前是星期几：<code>[[${#dates.dayOfWeek(date)-1}]]</code></p> <h2 id="如何在表格中实现图片预览"><a href="#如何在表格中实现图片预览" class="header-anchor">#</a> 如何在表格中实现图片预览</h2> <p>对于某些图片需要在表格中显示，可以使用<code>imageView</code>方法</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 在columns中格式化对应相关的列属性</span>
<span class="token punctuation">{</span>
	<span class="token literal-property property">field</span><span class="token operator">:</span> <span class="token string">'avatar'</span><span class="token punctuation">,</span>
	<span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'用户头像'</span><span class="token punctuation">,</span>
	<span class="token function-variable function">formatter</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> row<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> $<span class="token punctuation">.</span>table<span class="token punctuation">.</span><span class="token function">imageView</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> <span class="token string">'/profile/avatar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>多图片预览可以自己实现，示例。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 传入value 图片地址数组</span>
<span class="token function-variable function">previewImg</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token keyword">of</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> json <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        json<span class="token punctuation">.</span>src <span class="token operator">=</span> key<span class="token punctuation">;</span>
        data<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    layer<span class="token punctuation">.</span><span class="token function">photos</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">photos</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token string-property property">&quot;data&quot;</span><span class="token operator">:</span> data
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">anim</span><span class="token operator">:</span> <span class="token number">6</span> <span class="token comment">// 0-6的选择，指定弹出图片动画类型，默认随机</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="如何去掉页脚及左侧菜单栏"><a href="#如何去掉页脚及左侧菜单栏" class="header-anchor">#</a> 如何去掉页脚及左侧菜单栏</h2> <p>1、去除页脚<code>修改style.css</code>，同时删除<code>index.html</code>元素</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">#content-main</span> <span class="token punctuation">{</span>
    <span class="token property">height</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100% - 91px<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>footer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pull-right<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>© [[${copyrightYear}]] RuoYi Copyright <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>2、去左侧菜单栏（收起时隐藏左侧菜单）<code>修改style.css</code></p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">body.fixed-sidebar.mini-navbar #page-wrapper</span> <span class="token punctuation">{</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 0 0 0 0px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">body.body-small.fixed-sidebar.mini-navbar #page-wrapper</span> <span class="token punctuation">{</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 0 0 0 0px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>3、去左侧菜单栏（收起时隐藏左侧菜单）<code>修改index.js</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">769</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">'mini-navbar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.navbar-static-side'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fadeIn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 换成 $('.navbar-static-side').hide();</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;.sidebar-collapse .logo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">&quot;hide&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">SmoothlyMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hasClass</span><span class="token punctuation">(</span><span class="token string">'mini-navbar'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    	<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;.navbar-static-side&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 添加显示这一行</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#side-menu'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;.sidebar-collapse .logo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">&quot;hide&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#side-menu'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fadeIn</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hasClass</span><span class="token punctuation">(</span><span class="token string">'fixed-sidebar'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    	<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;.navbar-static-side&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 添加隐藏这一行</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#side-menu'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;.sidebar-collapse .logo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">&quot;hide&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#side-menu'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fadeIn</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#side-menu'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeAttr</span><span class="token punctuation">(</span><span class="token string">'style'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>4、隐藏左侧菜单，需要添加<code>.canvas-menu</code>到body元素</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code>&lt;body class = <span class="token string">&quot;canvas-menu&quot;</span>&gt; 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="登录页如何开启注册用户功能"><a href="#登录页如何开启注册用户功能" class="header-anchor">#</a> 登录页如何开启注册用户功能</h2> <p>在菜单<code>参数设置</code>修改参数键名<code>sys.account.registerUser</code>设置<code>true</code>即可。默认为<code>false</code>关闭。</p> <h2 id="如何限制账户只能一个人登录"><a href="#如何限制账户只能一个人登录" class="header-anchor">#</a> 如何限制账户只能一个人登录</h2> <p>在<code>application.yml</code>设置<code>maxSession</code>为<code>1</code>即可。</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token comment"># Shiro</span>
<span class="token key atrule">shiro</span><span class="token punctuation">:</span>
  <span class="token key atrule">session</span><span class="token punctuation">:</span>
    <span class="token comment"># 同一个用户最大会话数，比如2的意思是同一个账号允许最多同时两个人登录（默认-1不限制）</span>
    <span class="token key atrule">maxSession</span><span class="token punctuation">:</span> <span class="token number">1</span>
    <span class="token comment"># 踢出之前登录的/之后登录的用户，默认踢出之前登录的用户</span>
    <span class="token key atrule">kickoutAfter</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="登录页面如何不显示验证码"><a href="#登录页面如何不显示验证码" class="header-anchor">#</a> 登录页面如何不显示验证码</h2> <p>在<code>application.yml</code>设置<code>captchaEnabled</code>为<code>false</code>即可</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token comment"># Shiro</span>
<span class="token key atrule">shiro</span><span class="token punctuation">:</span>
  <span class="token key atrule">user</span><span class="token punctuation">:</span>
    <span class="token comment"># 验证码开关</span>
    <span class="token key atrule">captchaEnabled</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="如何excel导出子对象多个字段"><a href="#如何excel导出子对象多个字段" class="header-anchor">#</a> 如何Excel导出子对象多个字段</h2> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 单个字段导出</span>
<span class="token annotation punctuation">@Excel</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;部门名称&quot;</span><span class="token punctuation">,</span> targetAttr <span class="token operator">=</span> <span class="token string">&quot;deptName&quot;</span><span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token class-name">Type</span><span class="token punctuation">.</span><span class="token constant">EXPORT</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">Dept</span> dept<span class="token punctuation">;</span>

<span class="token comment">// 多个字段导出</span>
<span class="token annotation punctuation">@Excels</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Excel</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;部门名称&quot;</span><span class="token punctuation">,</span> targetAttr <span class="token operator">=</span> <span class="token string">&quot;deptName&quot;</span><span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token class-name">Type</span><span class="token punctuation">.</span><span class="token constant">EXPORT</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token annotation punctuation">@Excel</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;部门负责人&quot;</span><span class="token punctuation">,</span> targetAttr <span class="token operator">=</span> <span class="token string">&quot;leader&quot;</span><span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token class-name">Type</span><span class="token punctuation">.</span><span class="token constant">EXPORT</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">Dept</span> dept<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="更多操作字符串参数读取问题"><a href="#更多操作字符串参数读取问题" class="header-anchor">#</a> 更多操作字符串参数读取问题</h2> <p>事件中需要传递字符串参数，可以参考<code>resetPwd</code>传递方式。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>onclick<span class="token operator">=</span><span class="token function">resetPwd</span><span class="token punctuation">(</span><span class="token string">&quot; + row.userId + ',' + &quot;</span><span class="token string">'&quot; + row.userName + &quot;'</span><span class="token string">&quot; + &quot;</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>完整代码</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function-variable function">formatter</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> row<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> actions <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	actions<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'&lt;a class=&quot;btn btn-success btn-xs '</span> <span class="token operator">+</span> editFlag <span class="token operator">+</span> <span class="token string">'&quot; href=&quot;javascript:void(0)&quot; onclick=&quot;$.operate.editTab(\''</span> <span class="token operator">+</span> row<span class="token punctuation">.</span>userId <span class="token operator">+</span> <span class="token string">'\')&quot;&gt;&lt;i class=&quot;fa fa-edit&quot;&gt;&lt;/i&gt;编辑&lt;/a&gt; '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	actions<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'&lt;a class=&quot;btn btn-danger btn-xs '</span> <span class="token operator">+</span> removeFlag <span class="token operator">+</span> <span class="token string">'&quot; href=&quot;javascript:void(0)&quot; onclick=&quot;$.operate.remove(\''</span> <span class="token operator">+</span> row<span class="token punctuation">.</span>userId <span class="token operator">+</span> <span class="token string">'\')&quot;&gt;&lt;i class=&quot;fa fa-remove&quot;&gt;&lt;/i&gt;删除&lt;/a&gt; '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">var</span> more <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	more<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;a class='btn btn-default btn-xs &quot;</span> <span class="token operator">+</span> resetPwdFlag <span class="token operator">+</span> <span class="token string">&quot;' href='javascript:void(0)' onclick=resetPwd(&quot;</span> <span class="token operator">+</span> row<span class="token punctuation">.</span>userId <span class="token operator">+</span> <span class="token string">','</span> <span class="token operator">+</span> <span class="token string">&quot;'&quot;</span> <span class="token operator">+</span> row<span class="token punctuation">.</span>userName <span class="token operator">+</span> <span class="token string">&quot;'&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;)&gt;&lt;i class='fa fa-key'&gt;&lt;/i&gt;重置密码&lt;/a&gt; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	more<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;a class='btn btn-default btn-xs &quot;</span> <span class="token operator">+</span> editFlag <span class="token operator">+</span> <span class="token string">&quot;' href='javascript:void(0)' onclick='authRole(&quot;</span> <span class="token operator">+</span> row<span class="token punctuation">.</span>userId <span class="token operator">+</span> <span class="token string">&quot;)'&gt;&lt;i class='fa fa-check-square-o'&gt;&lt;/i&gt;分配角色&lt;/a&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	actions<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'&lt;a tabindex=&quot;0&quot; class=&quot;btn btn-info btn-xs&quot; role=&quot;button&quot; data-container=&quot;body&quot; data-placement=&quot;left&quot; data-toggle=&quot;popover&quot; data-html=&quot;true&quot; data-trigger=&quot;hover&quot; data-content=&quot;'</span> <span class="token operator">+</span> more<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'&quot;&gt;&lt;i class=&quot;fa fa-chevron-circle-right&quot;&gt;&lt;/i&gt;更多操作&lt;/a&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> actions<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="单元格内容过长显示处理方法"><a href="#单元格内容过长显示处理方法" class="header-anchor">#</a> 单元格内容过长显示处理方法</h2> <p>1、使用系统自带的方法格式化处理</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token punctuation">{</span>
	field<span class="token operator">:</span> <span class="token char">'remark'</span><span class="token punctuation">,</span>
	title<span class="token operator">:</span> <span class="token char">'备注'</span><span class="token punctuation">,</span>
	align<span class="token operator">:</span> <span class="token char">'center'</span><span class="token punctuation">,</span>
	formatter<span class="token operator">:</span> <span class="token function">function</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> row<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> $<span class="token punctuation">.</span>table<span class="token punctuation">.</span><span class="token function">tooltip</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>2、添加css控制</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.select-table table</span> <span class="token punctuation">{</span>
    <span class="token property">table-layout</span><span class="token punctuation">:</span>fixed<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.select-table .table td</span> <span class="token punctuation">{</span>
	<span class="token comment">/* 超出部分隐藏 */</span>
	<span class="token property">overflow</span><span class="token punctuation">:</span>hidden<span class="token punctuation">;</span>
	<span class="token comment">/* 超出部分显示省略号 */</span>
    <span class="token property">text-overflow</span><span class="token punctuation">:</span>ellipsis<span class="token punctuation">;</span>
    <span class="token comment">/*规定段落中的文本不进行换行 */</span>
    <span class="token property">white-space</span><span class="token punctuation">:</span>nowrap<span class="token punctuation">;</span>
    <span class="token comment">/* 配合宽度来使用 */</span>
	<span class="token property">height</span><span class="token punctuation">:</span>40px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="表格禁用某列复选框选择方法"><a href="#表格禁用某列复选框选择方法" class="header-anchor">#</a> 表格禁用某列复选框选择方法</h2> <p>条件成立禁用checkbox返回（disabled : true）即可。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
	<span class="token literal-property property">checkbox</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
	<span class="token function-variable function">formatter</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> row<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>$<span class="token punctuation">.</span>common<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;ry&quot;</span><span class="token punctuation">,</span> row<span class="token punctuation">.</span>loginName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">disabled</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">disabled</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="表格默认勾选某列复选框方法"><a href="#表格默认勾选某列复选框方法" class="header-anchor">#</a> 表格默认勾选某列复选框方法</h2> <p>条件成立禁用checkbox返回（disabled : true）即可。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
	<span class="token literal-property property">checkbox</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
	<span class="token function-variable function">formatter</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> row<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>$<span class="token punctuation">.</span>common<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;ry&quot;</span><span class="token punctuation">,</span> row<span class="token punctuation">.</span>loginName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">checked</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">checked</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">提示</p> <p>如果默认勾选，并且配置了 <code>rememberSelected: true,</code> 需要特殊处理下。参考demo</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>zh<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>th</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.thymeleaf.org<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>shiro</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.pollix.at/thymeleaf/shiro<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">th:</span>block</span> <span class="token attr-name"><span class="token namespace">th:</span>include</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>include :: header('翻页记住选择')<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gray-bg<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container-div<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
     	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn-group-sm<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>toolbar<span class="token punctuation">&quot;</span></span> <span class="token attr-name">role</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>group<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn btn-success<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value javascript language-javascript"><span class="token function">checkItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
	            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>fa fa-check<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span> 选中项
	        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>row<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>col-sm-12 select-table table-striped<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bootstrap-table<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>include</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>include :: footer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name"><span class="token namespace">th:</span>inline</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
        <span class="token keyword">var</span> prefix <span class="token operator">=</span> ctx <span class="token operator">+</span> <span class="token string">&quot;demo/table&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> datas <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>$<span class="token punctuation">{</span>@dict<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token string">'sys_normal_disable'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">uniqueId</span><span class="token operator">:</span> <span class="token string">&quot;userCode&quot;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">url</span><span class="token operator">:</span> prefix <span class="token operator">+</span> <span class="token string">&quot;/list&quot;</span><span class="token punctuation">,</span>
		        <span class="token literal-property property">rememberSelected</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token literal-property property">columns</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
                	<span class="token literal-property property">field</span><span class="token operator">:</span> <span class="token string">'state'</span><span class="token punctuation">,</span>
		            <span class="token literal-property property">checkbox</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		            <span class="token function-variable function">formatter</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> row<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		            	<span class="token keyword">if</span><span class="token punctuation">(</span>$<span class="token punctuation">.</span><span class="token function">inArray</span><span class="token punctuation">(</span>row<span class="token punctuation">.</span>userCode<span class="token punctuation">,</span> table<span class="token punctuation">.</span>rememberSelectedIds<span class="token punctuation">[</span>table<span class="token punctuation">.</span>options<span class="token punctuation">.</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">||</span> row<span class="token punctuation">.</span>userCode <span class="token operator">==</span> <span class="token number">1000001</span> <span class="token operator">||</span> row<span class="token punctuation">.</span>userCode <span class="token operator">==</span> <span class="token number">1000002</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		            		<span class="token keyword">if</span><span class="token punctuation">(</span>$<span class="token punctuation">.</span><span class="token function">inArray</span><span class="token punctuation">(</span>row<span class="token punctuation">.</span>userCode<span class="token punctuation">,</span> uncheckUserCode<span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
		            		<span class="token punctuation">{</span>
		            			<span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">checked</span> <span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
		            		<span class="token punctuation">}</span>
		            		<span class="token keyword">var</span> selectedRows <span class="token operator">=</span> table<span class="token punctuation">.</span>rememberSelecteds<span class="token punctuation">[</span>table<span class="token punctuation">.</span>options<span class="token punctuation">.</span>id<span class="token punctuation">]</span><span class="token punctuation">;</span>
		            		func <span class="token operator">=</span> $<span class="token punctuation">.</span><span class="token function">inArray</span><span class="token punctuation">(</span><span class="token string">'check'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'check'</span><span class="token punctuation">,</span> <span class="token string">'check-all'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">?</span> <span class="token string">'union'</span> <span class="token operator">:</span> <span class="token string">'difference'</span><span class="token punctuation">;</span>
		            		<span class="token keyword">if</span><span class="token punctuation">(</span>$<span class="token punctuation">.</span>common<span class="token punctuation">.</span><span class="token function">isNotEmpty</span><span class="token punctuation">(</span>selectedRows<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		            			table<span class="token punctuation">.</span>rememberSelecteds<span class="token punctuation">[</span>table<span class="token punctuation">.</span>options<span class="token punctuation">.</span>id<span class="token punctuation">]</span> <span class="token operator">=</span> _<span class="token punctuation">[</span>func<span class="token punctuation">]</span><span class="token punctuation">(</span>selectedRows<span class="token punctuation">,</span> row<span class="token punctuation">)</span><span class="token punctuation">;</span>
	            			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
	            				table<span class="token punctuation">.</span>rememberSelecteds<span class="token punctuation">[</span>table<span class="token punctuation">.</span>options<span class="token punctuation">.</span>id<span class="token punctuation">]</span> <span class="token operator">=</span> _<span class="token punctuation">[</span>func<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> row<span class="token punctuation">)</span><span class="token punctuation">;</span>
	            			<span class="token punctuation">}</span>
		            		<span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">checked</span> <span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
		            	<span class="token punctuation">}</span>
		            	<span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">checked</span> <span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
		        	<span class="token punctuation">}</span>
		        <span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token punctuation">{</span>
					<span class="token literal-property property">field</span> <span class="token operator">:</span> <span class="token string">'userId'</span><span class="token punctuation">,</span> 
					<span class="token literal-property property">title</span> <span class="token operator">:</span> <span class="token string">'用户ID'</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token punctuation">{</span>
					<span class="token literal-property property">field</span> <span class="token operator">:</span> <span class="token string">'userCode'</span><span class="token punctuation">,</span> 
					<span class="token literal-property property">title</span> <span class="token operator">:</span> <span class="token string">'用户编号'</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token punctuation">{</span>
					<span class="token literal-property property">field</span> <span class="token operator">:</span> <span class="token string">'userName'</span><span class="token punctuation">,</span> 
					<span class="token literal-property property">title</span> <span class="token operator">:</span> <span class="token string">'用户姓名'</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token punctuation">{</span>
					<span class="token literal-property property">field</span> <span class="token operator">:</span> <span class="token string">'userPhone'</span><span class="token punctuation">,</span> 
					<span class="token literal-property property">title</span> <span class="token operator">:</span> <span class="token string">'用户手机'</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token punctuation">{</span>
					<span class="token literal-property property">field</span> <span class="token operator">:</span> <span class="token string">'userEmail'</span><span class="token punctuation">,</span> 
					<span class="token literal-property property">title</span> <span class="token operator">:</span> <span class="token string">'用户邮箱'</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token punctuation">{</span>
				    <span class="token literal-property property">field</span> <span class="token operator">:</span> <span class="token string">'userBalance'</span><span class="token punctuation">,</span>
				    <span class="token literal-property property">title</span> <span class="token operator">:</span> <span class="token string">'用户余额'</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token punctuation">{</span>
                    <span class="token literal-property property">field</span><span class="token operator">:</span> <span class="token string">'status'</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'用户状态'</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">align</span><span class="token operator">:</span> <span class="token string">'center'</span><span class="token punctuation">,</span>
                    <span class="token function-variable function">formatter</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> row<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    	<span class="token keyword">return</span> $<span class="token punctuation">.</span>table<span class="token punctuation">.</span><span class="token function">selectDictLabel</span><span class="token punctuation">(</span>datas<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
		        <span class="token punctuation">{</span>
		            <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'操作'</span><span class="token punctuation">,</span>
		            <span class="token literal-property property">align</span><span class="token operator">:</span> <span class="token string">'center'</span><span class="token punctuation">,</span>
		            <span class="token function-variable function">formatter</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> row<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		            	<span class="token keyword">var</span> actions <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		            	actions<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'&lt;a class=&quot;btn btn-success btn-xs&quot; href=&quot;#&quot;&gt;&lt;i class=&quot;fa fa-edit&quot;&gt;&lt;/i&gt;编辑&lt;/a&gt; '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        actions<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'&lt;a class=&quot;btn btn-danger btn-xs&quot; href=&quot;#&quot;&gt;&lt;i class=&quot;fa fa-remove&quot;&gt;&lt;/i&gt;删除&lt;/a&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">return</span> actions<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		            <span class="token punctuation">}</span>
		        <span class="token punctuation">}</span><span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
            $<span class="token punctuation">.</span>table<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        
        <span class="token keyword">var</span> uncheckUserCode <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    	<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#bootstrap-table&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;uncheck.bs.table uncheck-all.bs.table&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span> rows</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    		<span class="token keyword">if</span><span class="token punctuation">(</span>rows<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> index <span class="token keyword">in</span> rows<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    				uncheckUserCode<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>rows<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>userCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
   		        <span class="token punctuation">}</span>
    		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    			uncheckUserCode<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>rows<span class="token punctuation">.</span>userCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
    		<span class="token punctuation">}</span>
    	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
    	<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#bootstrap-table&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;check.bs.table check-all.bs.table&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span> rows</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    		<span class="token keyword">if</span><span class="token punctuation">(</span>rows<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> index <span class="token keyword">in</span> rows<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    				<span class="token function">deleteItem</span><span class="token punctuation">(</span>rows<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>userCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
   		        <span class="token punctuation">}</span>
    		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    			<span class="token function">deleteItem</span><span class="token punctuation">(</span>rows<span class="token punctuation">.</span>userCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
    		<span class="token punctuation">}</span>
    	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    	
    	<span class="token keyword">function</span> <span class="token function">deleteItem</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    	    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token keyword">in</span> uncheckUserCode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    	        <span class="token keyword">if</span> <span class="token punctuation">(</span>uncheckUserCode<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">===</span> item<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    	        	uncheckUserCode<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
    	        <span class="token punctuation">}</span>
    	    <span class="token punctuation">}</span>
    	<span class="token punctuation">}</span>
        
        <span class="token comment">// 选中数据</span>
        <span class="token keyword">function</span> <span class="token function">checkItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        	<span class="token comment">// var arrays = $.table.selectColumns(&quot;userId&quot;);</span>
        	<span class="token keyword">var</span> arrays <span class="token operator">=</span> $<span class="token punctuation">.</span>table<span class="token punctuation">.</span><span class="token function">selectColumns</span><span class="token punctuation">(</span><span class="token string">&quot;userCode&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        	<span class="token function">alert</span><span class="token punctuation">(</span>arrays<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br></div></div></div> <h2 id="页面如何一次初始化多个表格"><a href="#页面如何一次初始化多个表格" class="header-anchor">#</a> 页面如何一次初始化多个表格</h2> <p>在<code>options</code>中添加<code>id</code>参数，如果有按钮组也需要添加<code>toolbar</code>。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 表格1</span>
<span class="token keyword">var</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;bootstrap-table1&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">toolbar</span><span class="token operator">:</span> <span class="token string">&quot;toolbar1&quot;</span><span class="token punctuation">,</span>
	<span class="token comment">// 省略 ....</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
$<span class="token punctuation">.</span>table<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 表格2</span>
<span class="token keyword">var</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;bootstrap-table2&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">toolbar</span><span class="token operator">:</span> <span class="token string">&quot;toolbar2&quot;</span><span class="token punctuation">,</span>
	<span class="token comment">// 省略 ....</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
$<span class="token punctuation">.</span>table<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="表格底部合计列拖动显示问题"><a href="#表格底部合计列拖动显示问题" class="header-anchor">#</a> 表格底部合计列拖动显示问题</h2> <p>在<code>options</code>中添加<code>onLoadSuccess</code>参数。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token literal-property property">onLoadSuccess</span><span class="token operator">:</span> onLoadSuccess<span class="token punctuation">,</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 监听表体fixed-table-body滚动事件，赋值给表尾fixed-table-footer</span>
<span class="token keyword">function</span> <span class="token function">onLoadSuccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;.fixed-table-body&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;scroll&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">var</span> sl<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>scrollLeft<span class="token punctuation">;</span>
		<span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>scrollLeft <span class="token operator">=</span> sl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="表格操作列传递行数据的对象"><a href="#表格操作列传递行数据的对象" class="header-anchor">#</a> 表格操作列传递行数据的对象</h2> <p>传递JSON字符串</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>actions<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'&lt;a class=&quot;btn btn-success btn-xs href=&quot;javascript:void(0)&quot; onclick=&quot;edit('</span> <span class="token operator">+</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>row<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&quot;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">'&amp;quot;'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">')&quot;&gt;&lt;i class=&quot;fa fa-edit&quot;&gt;&lt;/i&gt;编辑&lt;/a&gt; '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>传递JSON对象</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>actions<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;a class='btn btn-success btn-xs href='javascript:void(0)' onclick='edit(&quot;</span> <span class="token operator">+</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>row<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;)'&gt;&lt;i class='fa fa-edit'&gt;&lt;/i&gt;编辑&lt;/a&gt; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>获取xxxx字段</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">edit</span><span class="token punctuation">(</span><span class="token parameter">row</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span>row<span class="token punctuation">.</span>xxxx<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="日期控件初始化时间并格式化"><a href="#日期控件初始化时间并格式化" class="header-anchor">#</a> 日期控件初始化时间并格式化</h2> <p>使用thymeleaf在页面直接获取当前时间并格式化输出</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${#dates.format(new java.util.Date(), 'yyyy-MM-dd')}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${#dates.format(new java.util.Date().getTime(), 'yyyy-MM-dd HH:mm:ss')}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>time<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="如何调整首页左侧菜单栏宽度"><a href="#如何调整首页左侧菜单栏宽度" class="header-anchor">#</a> 如何调整首页左侧菜单栏宽度</h2> <p>调整<code>style.css</code>对应样式宽度，例如宽度200修改成250</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">body.fixed-sidebar .navbar-static-side, body.canvas-menu .navbar-static-side</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 250px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">nav .logo</span> <span class="token punctuation">{</span>
	<span class="token property">width</span><span class="token punctuation">:</span> 250px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">#page-wrapper</span> <span class="token punctuation">{</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 0 0 0 250px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="如何默认显示表格卡片视图"><a href="#如何默认显示表格卡片视图" class="header-anchor">#</a> 如何默认显示表格卡片视图</h2> <p>在<code>options</code>中添加 <code>mobileResponsive</code> <code>cardView</code> 参数</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">mobileResponsive</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token literal-property property">cardView</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="编辑和删除操作按钮不可用"><a href="#编辑和删除操作按钮不可用" class="header-anchor">#</a> 编辑和删除操作按钮不可用</h2> <p>这种情况一般是因为第一列不是唯一键或<code>formatter</code>序号造成的。解决方案如下，指定唯一列属性 配合删除/修改使用 未指定则使用表格行首列</p> <p>在<code>options</code>中添加 <code>uniqueId</code>参数，<code>userId</code>修改成你表的唯一列字段。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">uniqueId</span><span class="token operator">:</span> <span class="token string">'userId'</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="tomcat部署多个war包项目异常"><a href="#tomcat部署多个war包项目异常" class="header-anchor">#</a> Tomcat部署多个War包项目异常</h2> <p><code>default-domain</code>的值不一样就可以了
在<code>application.yml</code>里面配置上</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">jmx</span><span class="token punctuation">:</span>
    <span class="token key atrule">default-domain</span><span class="token punctuation">:</span> applicationname
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="部署多个项目ehcache缓存异常"><a href="#部署多个项目ehcache缓存异常" class="header-anchor">#</a> 部署多个项目Ehcache缓存异常</h2> <p>同一服务器部署多个项目，有可能会导致<code>shiro-activeSessionCache</code>缓存冲突。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>net.sf.ehcache.ObjectExistsException: Cache shiro-activeSessionCache already exists
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>可以在<code>ShiroConfig</code>设置不同名称区分一下就可以了。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">OnlineSessionDAO</span> <span class="token function">sessionDAO</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
        <span class="token class-name">OnlineSessionDAO</span> sessionDAO <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OnlineSessionDAO</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        sessionDAO<span class="token punctuation">.</span><span class="token function">setActiveSessionsCacheName</span><span class="token punctuation">(</span><span class="token string">&quot;缓存名字&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> sessionDAO<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="tomcat临时目录tmp抛错误异常"><a href="#tomcat临时目录tmp抛错误异常" class="header-anchor">#</a> Tomcat临时目录tmp抛错误异常</h2> <p>首先，我们应该知道，对于http POST请求来说，它需要使用这个临时目录来存储post数据。<br>
其次，因为该目录是挂在到/temp目录下的临时文件，那么对于一些OS系统，像centOS将经常删除这个临时目录，所有导致该目录不存在了</p> <p><strong>解决方案</strong></p> <p>1.在<code>application.yml</code>文件中设置<code>multipart</code> <code>location</code> ，并重启项目</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">http</span><span class="token punctuation">:</span>
    <span class="token key atrule">multipart</span><span class="token punctuation">:</span>
      <span class="token key atrule">location</span><span class="token punctuation">:</span> /data/upload_tmp
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>2.在<code>application.yml</code>文件中设置</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code>server
  <span class="token key atrule">tomcat</span><span class="token punctuation">:</span>
     <span class="token key atrule">basedir</span><span class="token punctuation">:</span> /tmp/tomcat
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>3.在配置文件添加<code>bean</code></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">MultipartConfigElement</span> <span class="token function">multipartConfigElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
　　<span class="token class-name">MultipartConfigFactory</span> factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MultipartConfigFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
　　factory<span class="token punctuation">.</span><span class="token function">setLocation</span><span class="token punctuation">(</span><span class="token string">&quot;/tmp/tomcat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
　　<span class="token keyword">return</span> factory<span class="token punctuation">.</span><span class="token function">createMultipartConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>4.添加启动参数<code>-java.tmp.dir=/path/to/application/temp/</code>，并重启。</p> <h2 id="如何部署配置支持https访问"><a href="#如何部署配置支持https访问" class="header-anchor">#</a> 如何部署配置支持https访问</h2> <p><code>Nginx</code> 配置为例，完整流程如下</p> <p><strong>申请下载ssl证书</strong> 证书有很多种，申请成功后会得到一个压缩包，里面有2个证书</p> <p>1、安装<code>OpenSSL</code> <code>yum -y install openssl openssl-devel</code></p> <p>2、运行添加<code>ssl</code>模块<br> <code>./configure --prefix=/usr/local/nginx --with-http_ssl_module</code></p> <p>3、配置完成后，运行命令
<code>make</code></p> <p>4、然后将刚刚编译好的<code>nginx</code>覆盖掉原有的<code>nginx</code>（这个时候nginx要停止状态）<br> <code>cp objs/nginx /usr/local/nginx/sbin/</code></p> <p>5、复制<code>crt</code>证书文件和<code>key</code>私钥文件到<code>Nginx</code>服务器<code>/usr/local/nginx/conf</code>目录（此处为 <code>Nginx</code> 默认安装目录，请根据实际情况操作）下。</p> <p>6、编辑 <code>Nginx</code> 根目录下的 <code>conf/nginx.conf</code> 文件。添加内容如下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code># https 服务配置
server {
	# 侦听80端口
	listen 443 default ssl;
	ssl on;
	#证书文件名称
	ssl_certificate 1_ruoyi.vip_bundle.crt; 
	#私钥文件名称
	ssl_certificate_key 2_ruoyi.vip.key; 
	# 定义访问域名
	server_name ruoyi.vip;
	location / {
		# 存放了静态页面的根目录
		root   /home/ruoyi/projects/static-web;
		# 默认主页
		index index.html;
	}
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>7、重启<code>Nginx</code>通过<code>https</code>访问 <code>https://ruoyi.vip</code></p> <p>8、如需把<code>http</code>的域名请求转成<code>https</code>，添加<code>rewrite</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>rewrite ^(.*) https://$server_name$1 permanent;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>9、解决重定向后https变成了http 的问题</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>proxy_redirect http:// https://; 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="特殊字符串被过滤的解决办法"><a href="#特殊字符串被过滤的解决办法" class="header-anchor">#</a> 特殊字符串被过滤的解决办法</h2> <p>默认所有的都会过滤脚本，可以在<code>application.yml</code>配置<code>xss.excludes</code>属性排除<code>URL</code></p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token comment"># 防止XSS攻击</span>
<span class="token key atrule">xss</span><span class="token punctuation">:</span> 
  <span class="token comment"># 过滤开关</span>
  <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token comment"># 排除链接（多个用逗号分隔）</span>
  <span class="token key atrule">excludes</span><span class="token punctuation">:</span> /system/notice/*
  <span class="token comment"># 匹配链接</span>
  <span class="token key atrule">urlPatterns</span><span class="token punctuation">:</span> /system/*<span class="token punctuation">,</span>/monitor/*<span class="token punctuation">,</span>/tool/*
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="进入首页如何自动展开某菜单"><a href="#进入首页如何自动展开某菜单" class="header-anchor">#</a> 进入首页如何自动展开某菜单</h2> <p>例如，进入自动打开用户管理，调用<code>applyPath</code>，填入你请求菜单对应的url地址。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">applyPath</span><span class="token punctuation">(</span><span class="token string">&quot;/system/role&quot;</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="进入首页如何默认记忆控制台"><a href="#进入首页如何默认记忆控制台" class="header-anchor">#</a> 进入首页如何默认记忆控制台</h2> <p>例如用户退出后，下次登陆系统，能默认打开之前工作路径。</p> <p>可以在<code>index.html</code>，<code>index-topnav.html</code>，去掉<code>window.performance.navigation.type == 1</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">if</span><span class="token punctuation">(</span>$<span class="token punctuation">.</span>common<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;history&quot;</span><span class="token punctuation">,</span> mode<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> window<span class="token punctuation">.</span>performance<span class="token punctuation">.</span>navigation<span class="token punctuation">.</span>type <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>换成</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">if</span><span class="token punctuation">(</span>$<span class="token punctuation">.</span>common<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;history&quot;</span><span class="token punctuation">,</span> mode<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="打包如何分离jar包和资源文件"><a href="#打包如何分离jar包和资源文件" class="header-anchor">#</a> 打包如何分离jar包和资源文件</h2> <p>特殊情况需要分离<code>lib</code>和<code>resouce</code>可以修改<code>ruoyi-admin</code> 参考如下</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>ruoyi<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.ruoyi<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.4.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>packaging</span><span class="token punctuation">&gt;</span></span>jar<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>packaging</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>ruoyi-admin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
	
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">&gt;</span></span>
	    web服务入口
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    
        <span class="token comment">&lt;!-- SpringBoot集成thymeleaf模板 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-thymeleaf<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token comment">&lt;!-- spring-boot-devtools --&gt;</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!-- 表示依赖不会传递 --&gt;</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

		<span class="token comment">&lt;!-- swagger2--&gt;</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.springfox<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>springfox-swagger2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
		
		<span class="token comment">&lt;!--防止进入swagger页面报类型转换错误，排除2.9.2中的引用，手动增加1.5.21版本--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.swagger<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>swagger-annotations<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.5.21<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.swagger<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>swagger-models<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.5.21<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
		
		<span class="token comment">&lt;!-- swagger2-UI--&gt;</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.springfox<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>springfox-swagger-ui<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
		 
    	 <span class="token comment">&lt;!-- Mysql驱动包 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

		<span class="token comment">&lt;!-- 核心模块--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.ruoyi<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>ruoyi-framework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        
        <span class="token comment">&lt;!-- 定时任务--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.ruoyi<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>ruoyi-quartz<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        
        <span class="token comment">&lt;!-- 代码生成--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.ruoyi<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>ruoyi-generator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>

     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- jar包名 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>finalName</span><span class="token punctuation">&gt;</span></span>${project.artifactId}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>finalName</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- 分离lib --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.maven.plugins<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>maven-dependency-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>executions</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>execution</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>copy-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phase</span><span class="token punctuation">&gt;</span></span>package<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phase</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goals</span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goal</span><span class="token punctuation">&gt;</span></span>copy-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goal</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goals</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
                            <span class="token comment">&lt;!-- 依赖包输出目录，将来不打进jar包里 --&gt;</span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>outputDirectory</span><span class="token punctuation">&gt;</span></span>${project.build.directory}/lib<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>outputDirectory</span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>excludeTransitive</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>excludeTransitive</span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>stripVersion</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>stripVersion</span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>includeScope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>includeScope</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>execution</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>executions</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- copy资源文件 --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>maven-resources-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>executions</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>execution</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>copy-resources<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phase</span><span class="token punctuation">&gt;</span></span>package<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phase</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goals</span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goal</span><span class="token punctuation">&gt;</span></span>copy-resources<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goal</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goals</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resources</span><span class="token punctuation">&gt;</span></span>
                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resource</span><span class="token punctuation">&gt;</span></span>
                                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>directory</span><span class="token punctuation">&gt;</span></span>src/main/resources<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>directory</span><span class="token punctuation">&gt;</span></span>
                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resource</span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resources</span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>outputDirectory</span><span class="token punctuation">&gt;</span></span>${project.build.directory}/resources<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>outputDirectory</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>execution</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>executions</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- 打jar包时忽略配置文件 --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.maven.plugins<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>maven-jar-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>excludes</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclude</span><span class="token punctuation">&gt;</span></span>**/*.yml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclude</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclude</span><span class="token punctuation">&gt;</span></span>**/*.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclude</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>excludes</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- spring boot repackage --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>layout</span><span class="token punctuation">&gt;</span></span>ZIP<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>layout</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>includes</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>non-exists<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>non-exists<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>includes</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>executions</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>execution</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goals</span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goal</span><span class="token punctuation">&gt;</span></span>repackage<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goal</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goals</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>execution</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>executions</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
	
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">提示</p> <p>启动命令java -jar -Dloader.path=resources,lib ruoyi-admin.jar</p></div> <h2 id="linux系统验证码乱码解决方法"><a href="#linux系统验证码乱码解决方法" class="header-anchor">#</a> Linux系统验证码乱码解决方法</h2> <p>在云服务器（少许），或者干净的服务器上，服务器没有安装字体。</p> <p>1、上传本地的 <a href="http://ruoyi.vip/font/Arial.ttf" target="_blank" rel="noopener noreferrer">Arial.ttf<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 字体</p> <p>2、此时执行以下三个命令：（建立字体索引信息，更新字体缓存）<br> <code>mkfontscale</code> <code>mkfontdir</code> <code>fc-cache -fv</code></p> <p>3、重新刷新你的页面</p> <h2 id="公共数据库定时任务没有被执行"><a href="#公共数据库定时任务没有被执行" class="header-anchor">#</a> 公共数据库定时任务没有被执行</h2> <p>经常会有小伙伴遇到定时任务没有被执行，或者执行了但是报错找不到对应的方法。</p> <p>定时任务是<code>分布式</code>的，如果多个机器链接同一个数据库，定时任务会随机在某个机器上跑，所以有时候不是没有被执行，而是被其他机器上执行了。如果你的方法只在本机有，所以会提示找不到对应定时任务的方法。</p> <p>这种情况或只有一台机器的话可以注释掉<code>ScheduleConfig.java</code>，这样的话就只会走本机（<code>quartz</code>相关定时任务的表也不需要），它也不会在去读<code>quartz</code>表走集群操作。</p> <h2 id="如何设置用户登录会话超时时间"><a href="#如何设置用户登录会话超时时间" class="header-anchor">#</a> 如何设置用户登录会话超时时间</h2> <p>找到<code>ruoyi-admin\src\main\resources</code>下面的<code>application.yml</code>配置文件</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token comment"># Shiro</span>
<span class="token key atrule">shiro</span><span class="token punctuation">:</span>
  <span class="token key atrule">session</span><span class="token punctuation">:</span>
    <span class="token comment"># Session超时时间，-1代表永不过期（默认30分钟）</span>
    <span class="token key atrule">expireTime</span><span class="token punctuation">:</span> <span class="token number">30</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="如何实现用户免密登录配置方法"><a href="#如何实现用户免密登录配置方法" class="header-anchor">#</a> 如何实现用户免密登录配置方法</h2> <p>免密使用的场景，例如短信验证码，第三方应用登录等。下面列出一个简单的实现方法，当然还有更多实现方式可以自己尝试。</p> <p>1、新增一个登录类型枚举类<code>LoginType</code></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>ruoyi<span class="token punctuation">.</span>framework<span class="token punctuation">.</span>shiro<span class="token punctuation">.</span>token</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * 登录类型枚举类
 * 
 * @author ruoyi
 */</span>
<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">LoginType</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * 密码登录
     */</span>
    <span class="token function">PASSWORD</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">/**
     * 免密码登录
     */</span>
    <span class="token function">NOPASSWD</span><span class="token punctuation">(</span><span class="token string">&quot;nopasswd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> desc<span class="token punctuation">;</span>

    <span class="token class-name">LoginType</span><span class="token punctuation">(</span><span class="token class-name">String</span> desc<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>desc <span class="token operator">=</span> desc<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> desc<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>2、自定义登录<code>Token</code></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>ruoyi<span class="token punctuation">.</span>framework<span class="token punctuation">.</span>shiro<span class="token punctuation">.</span>token</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>shiro<span class="token punctuation">.</span>authc<span class="token punctuation">.</span></span><span class="token class-name">UsernamePasswordToken</span></span><span class="token punctuation">;</span>

<span class="token comment">/**
 * 自定义登录Token
 * 
 * @author ruoyi
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserToken</span> <span class="token keyword">extends</span> <span class="token class-name">UsernamePasswordToken</span>
<span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token number">1L</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">LoginType</span> type<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">UserToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">UserToken</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">,</span> <span class="token class-name">String</span> password<span class="token punctuation">,</span> <span class="token class-name">LoginType</span> type<span class="token punctuation">,</span> <span class="token keyword">boolean</span> rememberMe<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> password<span class="token punctuation">,</span> rememberMe<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> type<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">UserToken</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">,</span> <span class="token class-name">LoginType</span> type<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> type<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">UserToken</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">,</span> <span class="token class-name">String</span> password<span class="token punctuation">,</span> <span class="token class-name">LoginType</span> type<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> password<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> type<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">LoginType</span> <span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> type<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setType</span><span class="token punctuation">(</span><span class="token class-name">LoginType</span> type<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> type<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><p>3、对应<code>Realm</code>中添加登录类型判断，例如<code>UserRealm</code>（这里演示公用一个<code>realm</code>，如单独有免密<code>realm</code>不需要）</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
 * 登录认证
 */</span>
<span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token class-name">AuthenticationInfo</span> <span class="token function">doGetAuthenticationInfo</span><span class="token punctuation">(</span><span class="token class-name">AuthenticationToken</span> token<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">AuthenticationException</span>
<span class="token punctuation">{</span>
	<span class="token class-name">UserToken</span> upToken <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">UserToken</span><span class="token punctuation">)</span> token<span class="token punctuation">;</span>
	<span class="token class-name">LoginType</span> type <span class="token operator">=</span> upToken<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">String</span> username <span class="token operator">=</span> upToken<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">String</span> password <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>upToken<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		password <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>upToken<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token keyword">try</span>
	<span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">LoginType</span><span class="token punctuation">.</span><span class="token constant">PASSWORD</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{</span>
			user <span class="token operator">=</span> loginService<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">LoginType</span><span class="token punctuation">.</span><span class="token constant">NOPASSWD</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{</span>
			user <span class="token operator">=</span> loginService<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">CaptchaException</span> e<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">AuthenticationException</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">UserNotExistsException</span> e<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnknownAccountException</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">UserPasswordNotMatchException</span> e<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IncorrectCredentialsException</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">UserPasswordRetryLimitExceedException</span> e<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ExcessiveAttemptsException</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">UserBlockedException</span> e<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">LockedAccountException</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">RoleBlockedException</span> e<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">LockedAccountException</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;对用户[&quot;</span> <span class="token operator">+</span> username <span class="token operator">+</span> <span class="token string">&quot;]进行登录验证..验证未通过{}&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">AuthenticationException</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token class-name">SimpleAuthenticationInfo</span> info <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleAuthenticationInfo</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> password<span class="token punctuation">,</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> info<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br></div></div><p>4、<code>LoginService</code>添加<code>login</code>方法，去掉密码验证。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
 * 登录
 */</span>
<span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// 验证码校验</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token class-name">ServletUtils</span><span class="token punctuation">.</span><span class="token function">getRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token class-name">ShiroConstants</span><span class="token punctuation">.</span><span class="token constant">CURRENT_CAPTCHA</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token class-name">AsyncManager</span><span class="token punctuation">.</span><span class="token function">me</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">AsyncFactory</span><span class="token punctuation">.</span><span class="token function">recordLogininfor</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> <span class="token class-name">Constants</span><span class="token punctuation">.</span><span class="token constant">LOGIN_FAIL</span><span class="token punctuation">,</span> <span class="token class-name">MessageUtils</span><span class="token punctuation">.</span><span class="token function">message</span><span class="token punctuation">(</span><span class="token string">&quot;user.jcaptcha.error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">CaptchaException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// 用户名或密码为空 错误</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token class-name">AsyncManager</span><span class="token punctuation">.</span><span class="token function">me</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">AsyncFactory</span><span class="token punctuation">.</span><span class="token function">recordLogininfor</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> <span class="token class-name">Constants</span><span class="token punctuation">.</span><span class="token constant">LOGIN_FAIL</span><span class="token punctuation">,</span> <span class="token class-name">MessageUtils</span><span class="token punctuation">.</span><span class="token function">message</span><span class="token punctuation">(</span><span class="token string">&quot;not.null&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UserNotExistsException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 用户名不在指定范围内 错误</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>username<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token class-name">UserConstants</span><span class="token punctuation">.</span><span class="token constant">USERNAME_MIN_LENGTH</span>
			<span class="token operator">||</span> username<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token class-name">UserConstants</span><span class="token punctuation">.</span><span class="token constant">USERNAME_MAX_LENGTH</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token class-name">AsyncManager</span><span class="token punctuation">.</span><span class="token function">me</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">AsyncFactory</span><span class="token punctuation">.</span><span class="token function">recordLogininfor</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> <span class="token class-name">Constants</span><span class="token punctuation">.</span><span class="token constant">LOGIN_FAIL</span><span class="token punctuation">,</span> <span class="token class-name">MessageUtils</span><span class="token punctuation">.</span><span class="token function">message</span><span class="token punctuation">(</span><span class="token string">&quot;user.password.not.match&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UserPasswordNotMatchException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 查询用户信息</span>
	<span class="token class-name">User</span> user <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">selectUserByLoginName</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span>user <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token class-name">AsyncManager</span><span class="token punctuation">.</span><span class="token function">me</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">AsyncFactory</span><span class="token punctuation">.</span><span class="token function">recordLogininfor</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> <span class="token class-name">Constants</span><span class="token punctuation">.</span><span class="token constant">LOGIN_FAIL</span><span class="token punctuation">,</span> <span class="token class-name">MessageUtils</span><span class="token punctuation">.</span><span class="token function">message</span><span class="token punctuation">(</span><span class="token string">&quot;user.not.exists&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UserNotExistsException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">UserStatus</span><span class="token punctuation">.</span><span class="token constant">DELETED</span><span class="token punctuation">.</span><span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getDelFlag</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token class-name">AsyncManager</span><span class="token punctuation">.</span><span class="token function">me</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">AsyncFactory</span><span class="token punctuation">.</span><span class="token function">recordLogininfor</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> <span class="token class-name">Constants</span><span class="token punctuation">.</span><span class="token constant">LOGIN_FAIL</span><span class="token punctuation">,</span> <span class="token class-name">MessageUtils</span><span class="token punctuation">.</span><span class="token function">message</span><span class="token punctuation">(</span><span class="token string">&quot;user.password.delete&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UserDeleteException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">UserStatus</span><span class="token punctuation">.</span><span class="token constant">DISABLE</span><span class="token punctuation">.</span><span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token class-name">AsyncManager</span><span class="token punctuation">.</span><span class="token function">me</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">AsyncFactory</span><span class="token punctuation">.</span><span class="token function">recordLogininfor</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> <span class="token class-name">Constants</span><span class="token punctuation">.</span><span class="token constant">LOGIN_FAIL</span><span class="token punctuation">,</span> <span class="token class-name">MessageUtils</span><span class="token punctuation">.</span><span class="token function">message</span><span class="token punctuation">(</span><span class="token string">&quot;user.blocked&quot;</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span><span class="token function">getRemark</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UserBlockedException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token class-name">AsyncManager</span><span class="token punctuation">.</span><span class="token function">me</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">AsyncFactory</span><span class="token punctuation">.</span><span class="token function">recordLogininfor</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> <span class="token class-name">Constants</span><span class="token punctuation">.</span><span class="token constant">LOGIN_SUCCESS</span><span class="token punctuation">,</span> <span class="token class-name">MessageUtils</span><span class="token punctuation">.</span><span class="token function">message</span><span class="token punctuation">(</span><span class="token string">&quot;user.login.success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">recordLoginInfo</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> user<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br></div></div><p>5、在对应的登录方法中传入<code>LoginType.NOPASSWD</code>调用</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">UserToken</span> token <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserToken</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> <span class="token class-name">LoginType</span><span class="token punctuation">.</span><span class="token constant">NOPASSWD</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Subject</span> subject <span class="token operator">=</span> <span class="token class-name">SecurityUtils</span><span class="token punctuation">.</span><span class="token function">getSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
subject<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="如何处理long类型精度丢失问题"><a href="#如何处理long类型精度丢失问题" class="header-anchor">#</a> 如何处理Long类型精度丢失问题</h2> <p>当字段实体类为<code>Long</code>类型且值超过前端<code>js</code>显示的长度范围时会导致前端回显错误，解决方案如下</p> <p>1、使用<code>JsonSerialize</code>注解序列化的时候把Long自动转为<code>String</code>（针对单个属性）</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>fasterxml<span class="token punctuation">.</span>jackson<span class="token punctuation">.</span>databind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">JsonSerialize</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>fasterxml<span class="token punctuation">.</span>jackson<span class="token punctuation">.</span>databind<span class="token punctuation">.</span>ser<span class="token punctuation">.</span>std<span class="token punctuation">.</span></span><span class="token class-name">ToStringSerializer</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@JsonSerialize</span><span class="token punctuation">(</span>using <span class="token operator">=</span> <span class="token class-name">ToStringSerializer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">Long</span> xxx<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>2、添加<code>JacksonConfig</code>配置全局序列化（针对所有属性）</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>ruoyi<span class="token punctuation">.</span>framework<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>http<span class="token punctuation">.</span>converter<span class="token punctuation">.</span>json<span class="token punctuation">.</span></span><span class="token class-name">Jackson2ObjectMapperBuilder</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>http<span class="token punctuation">.</span>converter<span class="token punctuation">.</span>json<span class="token punctuation">.</span></span><span class="token class-name">MappingJackson2HttpMessageConverter</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>fasterxml<span class="token punctuation">.</span>jackson<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">JsonInclude</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>fasterxml<span class="token punctuation">.</span>jackson<span class="token punctuation">.</span>databind<span class="token punctuation">.</span></span><span class="token class-name">MapperFeature</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>fasterxml<span class="token punctuation">.</span>jackson<span class="token punctuation">.</span>databind<span class="token punctuation">.</span></span><span class="token class-name">ObjectMapper</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>fasterxml<span class="token punctuation">.</span>jackson<span class="token punctuation">.</span>databind<span class="token punctuation">.</span>module<span class="token punctuation">.</span></span><span class="token class-name">SimpleModule</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>fasterxml<span class="token punctuation">.</span>jackson<span class="token punctuation">.</span>databind<span class="token punctuation">.</span>ser<span class="token punctuation">.</span>std<span class="token punctuation">.</span></span><span class="token class-name">ToStringSerializer</span></span><span class="token punctuation">;</span>

<span class="token comment">/**
 * Jackson配置
 * 
 * @author ruoyi
 *
 */</span>
<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JacksonConfig</span>
<span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">MappingJackson2HttpMessageConverter</span> <span class="token function">jackson2HttpMessageConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">final</span> <span class="token class-name">Jackson2ObjectMapperBuilder</span> builder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jackson2ObjectMapperBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        builder<span class="token punctuation">.</span><span class="token function">serializationInclusion</span><span class="token punctuation">(</span><span class="token class-name">JsonInclude<span class="token punctuation">.</span>Include</span><span class="token punctuation">.</span><span class="token constant">NON_NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token class-name">ObjectMapper</span> objectMapper <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SimpleModule</span> simpleModule <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleModule</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// Long 转为 String 防止 js 丢失精度</span>
        simpleModule<span class="token punctuation">.</span><span class="token function">addSerializer</span><span class="token punctuation">(</span><span class="token class-name">Long</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">ToStringSerializer</span><span class="token punctuation">.</span>instance<span class="token punctuation">)</span><span class="token punctuation">;</span>
        objectMapper<span class="token punctuation">.</span><span class="token function">registerModule</span><span class="token punctuation">(</span>simpleModule<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 忽略 transient 关键词属性</span>
        objectMapper<span class="token punctuation">.</span><span class="token function">configure</span><span class="token punctuation">(</span><span class="token class-name">MapperFeature</span><span class="token punctuation">.</span><span class="token constant">PROPAGATE_TRANSIENT_MARKER</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MappingJackson2HttpMessageConverter</span><span class="token punctuation">(</span>objectMapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><h2 id="如何修改超级管理员登录密码"><a href="#如何修改超级管理员登录密码" class="header-anchor">#</a> 如何修改超级管理员登录密码</h2> <p>1、如果是自己知道超级管理员的密码且需要修改的情况。<br>
默认口令 <code>admin/admin123</code>，可以登录后在首页个人中心修改密码。</p> <p>2、如果自己忘记了超级管理员的密码可以重新生成秘钥替换数据库密码。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// 第一个参数为账户名 第二个参数为密码 第三个参数为盐对应用户表salt（如果没有可以不用填）</span>
	<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PasswordService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">encryptPassword</span><span class="token punctuation">(</span><span class="token string">&quot;admin&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;admin123&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;111111&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="如何修改数据监控登录账户密码"><a href="#如何修改数据监控登录账户密码" class="header-anchor">#</a> 如何修改数据监控登录账户密码</h2> <p>控制台管理用户名和密码默认为<code>ruoyi/123456</code></p> <p>找到<code>ruoyi-admin\src\main\resources</code>下面的<code>application-druid.yml</code>配置文件</p> <p>找到如下节点配置，设置控制台账号密码</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token comment"># 控制台管理用户名和密码</span>
<span class="token key atrule">login-username</span><span class="token punctuation">:</span> 你的监控台账号
<span class="token key atrule">login-password</span><span class="token punctuation">:</span> 你的监控台密码
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="分页插件如何手写count查询支持"><a href="#分页插件如何手写count查询支持" class="header-anchor">#</a> 分页插件如何手写count查询支持</h2> <p>增加<code>countSuffix</code> count 查询后缀配置参数，该参数是针对<code>PageInterceptor</code>配置的，默认值为<code>_COUNT</code>。</p> <p>分页插件会优先通过当前查询的<code>msId + countSuffix</code>查找手写的分页查询。</p> <p>如果存在就使用手写的<code>count</code>查询，如果不存在，仍然使用之前的方式自动创建<code>count</code>查询。</p> <p>例如，如果存在下面两个查询：</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectLeftjoin<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.github.pagehelper.model.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select a.id,b.name,a.py from user a
    left join user b on a.id = b.id
    order by a.id
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectLeftjoin_COUNT<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Long<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select count(distinct a.id) from user a
    left join user b on a.id = b.id
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>上面的<code>countSuffix</code>使用的默认值<code>_COUNT</code>，分页插件会自动获取到<code>selectLeftjoin_COUNT</code>查询，这个查询需要自己保证结果数正确。</p> <p>返回值的类型必须是<code>resultType=&quot;Long&quot;</code>，入参使用的和<code>selectLeftjoin</code>查询相同的参数，所以在<code>SQL</code>中要按照<code>selectLeftjoin</code>的入参来使用。</p> <p>因为<code>selectLeftjoin_COUNT</code>方法是自动调用的，所以不需要在接口提供相应的方法，如果需要单独调用，也可以提供。</p> <h2 id="如何修改成自定义的cookie名称"><a href="#如何修改成自定义的cookie名称" class="header-anchor">#</a> 如何修改成自定义的Cookie名称</h2> <p>在<code>ShiroConfig</code>中<code>sessionManager</code>方法添加，其中<code>ruoyi</code>为设置的<code>Cookie</code>名称</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 自定义 Cookie</span>
manager<span class="token punctuation">.</span><span class="token function">setSessionIdCookie</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SimpleCookie</span><span class="token punctuation">(</span><span class="token string">&quot;ruoyi&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="如何格式化前端日期时间戳内容"><a href="#如何格式化前端日期时间戳内容" class="header-anchor">#</a> 如何格式化前端日期时间戳内容</h2> <p>对应一些时间格式需要在前端进行格式化操作情况，解决方案如下</p> <p>1、后端使用<code>JsonFormat</code>注解格式化日期，时间戳<code>yyyy-MM-dd HH:mm:ss</code></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/** 创建时间 */</span>
<span class="token annotation punctuation">@JsonFormat</span><span class="token punctuation">(</span>pattern <span class="token operator">=</span> <span class="token string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">Date</span> time<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>2、前端使用<code>dateFormat</code>方法格式化日期，时间戳<code>yyyy-MM-dd HH:mm:ss</code></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span>
	<span class="token literal-property property">field</span><span class="token operator">:</span> <span class="token string">'createTime'</span><span class="token punctuation">,</span>
	<span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'创建时间'</span><span class="token punctuation">,</span>
	<span class="token function-variable function">formatter</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> row<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> $<span class="token punctuation">.</span>common<span class="token punctuation">.</span><span class="token function">dateFormat</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> <span class="token string">&quot;yyyy-MM-dd HH-mm-ss&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="使用https上传文件返回https路径"><a href="#使用https上传文件返回https路径" class="header-anchor">#</a> 使用https上传文件返回https路径</h2> <p>通过<code>https</code>请求进行文件上传却返回<code>http</code>的文件链接地址，主要原因是通过<code>request.getRequestURL</code>获取导致的。</p> <p>我们可以在<code>nginx</code>配置<code>location</code>处加上</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code>proxy_set_header X<span class="token punctuation">-</span>Forwarded<span class="token punctuation">-</span>Scheme  $scheme; 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>然后代码通过<code>request.getHeader(&quot;X-Forwarded-Scheme&quot;)</code>获取真实的<code>scheme</code></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">String</span> scheme <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">&quot;X-Forwarded-Scheme&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> serverName <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getServerName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> port <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getServerPort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> path <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getContextPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> basePath <span class="token operator">=</span> scheme <span class="token operator">+</span> <span class="token string">&quot;://&quot;</span> <span class="token operator">+</span> serverName <span class="token operator">+</span> path<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="使用velocity模板引擎兼容-符号"><a href="#使用velocity模板引擎兼容-符号" class="header-anchor">#</a> 使用Velocity模板引擎兼容$符号</h2> <p>当我们服务器端使用<code>velocity</code>模板来渲染前端页面的时候，而前端使用jquery,vue,angular等等也使用$运算符渲染变量，那么就会产生冲突，
对于这种特殊情况需要加入新的指令<code>#[[您前端不需要让velocity处理的内容]]#</code>，可以完美解决这个问题。</p> <p>示例：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 无法解析</span>
<span class="token keyword">let</span> <span class="token function-variable function">list</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> vm<span class="token punctuation">.</span>$u<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/${moduleName}/${businessName}/list&quot;</span><span class="token punctuation">,</span> params<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 正常解析</span>
<span class="token keyword">let</span> <span class="token function-variable function">list</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> vm<span class="token punctuation">.</span>#<span class="token punctuation">[</span><span class="token punctuation">[</span>$u<span class="token punctuation">]</span><span class="token punctuation">]</span>#<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/${moduleName}/${businessName}/list&quot;</span><span class="token punctuation">,</span> params<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="如何解决多数据源事务的一致性"><a href="#如何解决多数据源事务的一致性" class="header-anchor">#</a> 如何解决多数据源事务的一致性</h2> <p><a href="/ruoyi/document/cjjc.html#集成atomikos实现分布式事务">参考集成atomikos实现分布式事务</a></p> <h2 id="如何优雅的关闭后台系统服务"><a href="#如何优雅的关闭后台系统服务" class="header-anchor">#</a> 如何优雅的关闭后台系统服务</h2> <p><a href="/ruoyi/document/cjjc.html#集成actuator实现优雅关闭应用">参考集成actuator实现优雅关闭应用</a></p> <h2 id="如何使用redis实现集群会话管理"><a href="#如何使用redis实现集群会话管理" class="header-anchor">#</a> 如何使用Redis实现集群会话管理</h2> <p><a href="/ruoyi/document/cjjc.html#参考集成Redis实现集群会话">参考集成Redis实现集群会话</a></p> <h2 id="如何使用jwt实现登录授权访问控制"><a href="#如何使用jwt实现登录授权访问控制" class="header-anchor">#</a> 如何使用Jwt实现登录授权访问控制</h2> <p><a href="/ruoyi/document/cjjc.html#集成Jwt实现登录授权访问">参考集成Jwt实现登录授权访问</a></p> <h2 id="如何解决导出使用下载插件出现异常"><a href="#如何解决导出使用下载插件出现异常" class="header-anchor">#</a> 如何解决导出使用下载插件出现异常</h2> <p>导出文件的逻辑是先创建一个临时文件，等待前端请求下载结束后马上删除这个临时文件。但是有些下载插件，例如迅雷（他们是二次下载），这个时候文件已经删除，会导致异常，找不到文件。</p> <p>解决方案：如果有硬性要求话，可以把所有的导出都改成流的形式返回给前端，不采用临时文件的方法。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 默认的post请求 生成临时文件</span>
<span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/export&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ResponseBody</span>
<span class="token keyword">public</span> <span class="token class-name">AjaxResult</span> <span class="token function">export</span><span class="token punctuation">(</span><span class="token class-name">Xxxx</span> xxxx<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Xxxx</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> xxxxService<span class="token punctuation">.</span><span class="token function">selectXxxxList</span><span class="token punctuation">(</span>xxxx<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">ExcelUtil</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Xxxx</span><span class="token punctuation">&gt;</span></span> util <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ExcelUtil</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Xxxx</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">Xxxx</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> util<span class="token punctuation">.</span><span class="token function">exportExcel</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> <span class="token string">&quot;xxxx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>修改相关导出文件<code>java</code>代码和<code>ry-ui.js</code>通用导出方法</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 通过流的形式返回给前端</span>
<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/export&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ResponseBody</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">export</span><span class="token punctuation">(</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Xxxx</span> xxxx<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span>
<span class="token punctuation">{</span>
	<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Xxxx</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> xxxxService<span class="token punctuation">.</span><span class="token function">selectXxxxList</span><span class="token punctuation">(</span>xxxx<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">ExcelUtil</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Xxxx</span><span class="token punctuation">&gt;</span></span> util <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ExcelUtil</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Xxxx</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">Xxxx</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	util<span class="token punctuation">.</span><span class="token function">exportExcel</span><span class="token punctuation">(</span>response<span class="token punctuation">,</span> list<span class="token punctuation">,</span> <span class="token string">&quot;xxxx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// ry-ui.js导出数据修改成get请求方式</span>
<span class="token function-variable function">exportExcel</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">formId</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	table<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	$<span class="token punctuation">.</span>modal<span class="token punctuation">.</span><span class="token function">confirm</span><span class="token punctuation">(</span><span class="token string">&quot;确定导出所有&quot;</span> <span class="token operator">+</span> table<span class="token punctuation">.</span>options<span class="token punctuation">.</span>modalName <span class="token operator">+</span> <span class="token string">&quot;吗？&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> currentId <span class="token operator">=</span> $<span class="token punctuation">.</span>common<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>formId<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'form'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">)</span> <span class="token operator">:</span> formId<span class="token punctuation">;</span>
		<span class="token keyword">var</span> params <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#&quot;</span> <span class="token operator">+</span> table<span class="token punctuation">.</span>options<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">bootstrapTable</span><span class="token punctuation">(</span><span class="token string">'getOptions'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">var</span> dataParam <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#&quot;</span> <span class="token operator">+</span> currentId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">serializeArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		dataParam<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;orderByColumn&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;value&quot;</span><span class="token operator">:</span> params<span class="token punctuation">.</span>sortName <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		dataParam<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;isAsc&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;value&quot;</span><span class="token operator">:</span> params<span class="token punctuation">.</span>sortOrder <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href <span class="token operator">=</span> table<span class="token punctuation">.</span>options<span class="token punctuation">.</span>exportUrl <span class="token operator">+</span> <span class="token string">&quot;?&quot;</span> <span class="token operator">+</span> $<span class="token punctuation">.</span><span class="token function">param</span><span class="token punctuation">(</span>dataParam<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="如何解决请求地址存在中文出现异常"><a href="#如何解决请求地址存在中文出现异常" class="header-anchor">#</a> 如何解决请求地址存在中文出现异常</h2> <p><code>shrio1.7.0</code>版本才会出现，对于请求地址需要中文的情况下可以做以下处理。</p> <p>1、自定义<code>CustomShiroFilterFactoryBean.java</code>，设置<code>setBlockNonAscii</code>属性为<code>false</code></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>ruoyi<span class="token punctuation">.</span>framework<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>shiro<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>web<span class="token punctuation">.</span></span><span class="token class-name">ShiroFilterFactoryBean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>shiro<span class="token punctuation">.</span>web<span class="token punctuation">.</span>filter<span class="token punctuation">.</span></span><span class="token class-name">InvalidRequestFilter</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>shiro<span class="token punctuation">.</span>web<span class="token punctuation">.</span>filter<span class="token punctuation">.</span>mgt<span class="token punctuation">.</span></span><span class="token class-name">DefaultFilter</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>shiro<span class="token punctuation">.</span>web<span class="token punctuation">.</span>filter<span class="token punctuation">.</span>mgt<span class="token punctuation">.</span></span><span class="token class-name">FilterChainManager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>shiro<span class="token punctuation">.</span>web<span class="token punctuation">.</span>filter<span class="token punctuation">.</span>mgt<span class="token punctuation">.</span></span><span class="token class-name">FilterChainResolver</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>shiro<span class="token punctuation">.</span>web<span class="token punctuation">.</span>filter<span class="token punctuation">.</span>mgt<span class="token punctuation">.</span></span><span class="token class-name">PathMatchingFilterChainResolver</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>shiro<span class="token punctuation">.</span>web<span class="token punctuation">.</span>mgt<span class="token punctuation">.</span></span><span class="token class-name">WebSecurityManager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>shiro<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">AbstractShiroFilter</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>shiro<span class="token punctuation">.</span>mgt<span class="token punctuation">.</span></span><span class="token class-name">SecurityManager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span></span><span class="token class-name">BeanInitializationException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">Filter</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span>

<span class="token comment">/**
 * 自定义ShiroFilterFactoryBean解决资源中文路径问题
 * 
 * @author ruoyi
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomShiroFilterFactoryBean</span> <span class="token keyword">extends</span> <span class="token class-name">ShiroFilterFactoryBean</span>
<span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MySpringShiroFilter</span><span class="token punctuation">&gt;</span></span> <span class="token function">getObjectType</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">MySpringShiroFilter</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">AbstractShiroFilter</span> <span class="token function">createInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span>
    <span class="token punctuation">{</span>

        <span class="token class-name">SecurityManager</span> securityManager <span class="token operator">=</span> <span class="token function">getSecurityManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>securityManager <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token class-name">String</span> msg <span class="token operator">=</span> <span class="token string">&quot;SecurityManager property must be set.&quot;</span><span class="token punctuation">;</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BeanInitializationException</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>securityManager <span class="token keyword">instanceof</span> <span class="token class-name">WebSecurityManager</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token class-name">String</span> msg <span class="token operator">=</span> <span class="token string">&quot;The security manager does not implement the WebSecurityManager interface.&quot;</span><span class="token punctuation">;</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BeanInitializationException</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token class-name">FilterChainManager</span> manager <span class="token operator">=</span> <span class="token function">createFilterChainManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// Expose the constructed FilterChainManager by first wrapping it in a</span>
        <span class="token comment">// FilterChainResolver implementation. The AbstractShiroFilter implementations</span>
        <span class="token comment">// do not know about FilterChainManagers - only resolvers:</span>
        <span class="token class-name">PathMatchingFilterChainResolver</span> chainResolver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PathMatchingFilterChainResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        chainResolver<span class="token punctuation">.</span><span class="token function">setFilterChainManager</span><span class="token punctuation">(</span>manager<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Filter</span><span class="token punctuation">&gt;</span></span> filterMap <span class="token operator">=</span> manager<span class="token punctuation">.</span><span class="token function">getFilters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Filter</span> invalidRequestFilter <span class="token operator">=</span> filterMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">DefaultFilter</span><span class="token punctuation">.</span>invalidRequest<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>invalidRequestFilter <span class="token keyword">instanceof</span> <span class="token class-name">InvalidRequestFilter</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token comment">// 此处是关键,设置false跳过URL携带中文400，servletPath中文校验bug</span>
            <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">InvalidRequestFilter</span><span class="token punctuation">)</span> invalidRequestFilter<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setBlockNonAscii</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// Now create a concrete ShiroFilter instance and apply the acquired SecurityManager and built</span>
        <span class="token comment">// FilterChainResolver. It doesn't matter that the instance is an anonymous inner class</span>
        <span class="token comment">// here - we're just using it because it is a concrete AbstractShiroFilter instance that accepts</span>
        <span class="token comment">// injection of the SecurityManager and FilterChainResolver:</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MySpringShiroFilter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">WebSecurityManager</span><span class="token punctuation">)</span> securityManager<span class="token punctuation">,</span> chainResolver<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">MySpringShiroFilter</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractShiroFilter</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">protected</span> <span class="token class-name">MySpringShiroFilter</span><span class="token punctuation">(</span><span class="token class-name">WebSecurityManager</span> webSecurityManager<span class="token punctuation">,</span> <span class="token class-name">FilterChainResolver</span> resolver<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>webSecurityManager <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">&quot;WebSecurityManager property cannot be null.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">else</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setSecurityManager</span><span class="token punctuation">(</span>webSecurityManager<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>resolver <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setFilterChainResolver</span><span class="token punctuation">(</span>resolver<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br></div></div><p>2、替换<code>ShiroConfig.java</code>中的过滤器配置为自定义</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 默认的</span>
<span class="token class-name">ShiroFilterFactoryBean</span> shiroFilterFactoryBean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ShiroFilterFactoryBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">ShiroFilterFactoryBean</span>更换为<span class="token class-name">CustomShiroFilterFactoryBean</span>

<span class="token comment">// 自定义的</span>
<span class="token class-name">CustomShiroFilterFactoryBean</span> shiroFilterFactoryBean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CustomShiroFilterFactoryBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/ruoyi/document/gxrz.html" class="prev">
        更新日志
      </a></span> <span class="next"><a href="/ruoyi/other/donate.html">
        捐赠支持
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.c3abf7ee.js" defer></script><script src="/assets/js/2.f516d180.js" defer></script><script src="/assets/js/60.aae167a9.js" defer></script>
  </body>
</html>
